<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Haryana DataVista
 ‚Äì Statistical Abstract Chatbot</title>
<!-- VERSION: 4.1-STABLE - Last Modified Date Fixed, Music Toggle Safe Check Added -->
  <!-- VERSION: 4.0-CLEAN - File search removed, Last Modified fixed, FINAL VERSION -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    // Functions need to be defined before they're called in HTML
    function openPDFGuide() {
      window.open('STATS_SAHAYAK_Tutorial.html', '_blank');
    }
    
    function openTutorialVideos() {
      window.open('https://www.youtube.com/watch?v=YOUR_VIDEO_ID', '_blank');
    }
  </script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800;900&family=Playfair+Display:wght@700;900&family=Noto+Sans+Devanagari:wght@400;500;600;700&display=swap" rel="stylesheet">
 <style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: radial-gradient(ellipse at top, #1e3a8a, #0f172a);
  font-family: 'Poppins', sans-serif;
  min-height: 100vh;
  position: relative;
  overflow-x: hidden;
}

body::before {
  content: '';
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background-image: 
    radial-gradient(circle at 20% 50%, rgba(251, 191, 36, 0.1) 0%, transparent 50%),
    radial-gradient(circle at 80% 80%, rgba(249, 115, 22, 0.1) 0%, transparent 50%);
  pointer-events: none;
  z-index: 0;
}

.devanagari { font-family: 'Noto Sans Devanagari', sans-serif; }
.playfair { font-family: 'Playfair Display', serif; }
.container-main { position: relative; z-index: 1; }

.glass-card {
  background: rgba(255, 255, 255, 0.98);
  backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.3);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1), 0 0 0 1px rgba(255, 255, 255, 0.1) inset;
}

.gradient-text {
  background: linear-gradient(135deg, #ff6b35 0%, #f59e0b 50%, #ff6b35 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  background-size: 200% auto;
  animation: shimmer 3s linear infinite;
}

.mic-btn {
  transition: all 0.3s;
  -webkit-tap-highlight-color: transparent;
}

.mic-btn.recording {
  background: linear-gradient(135deg, #dc2626, #ef4444) !important;
  border-color: #dc2626 !important;
  animation: pulseRec 1.5s ease-in-out infinite;
}

@keyframes pulseRec {
  0%, 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(220, 38, 38, 0.7); }
  50% { transform: scale(1.1); box-shadow: 0 0 0 10px rgba(220, 38, 38, 0); }
}

@keyframes shimmer { to { background-position: 200% center; } }

.header-glow { position: relative; }

.header-glow::before {
  content: '';
  position: absolute;
  top: -20px; left: 50%;
  transform: translateX(-50%);
  width: 200px; height: 200px;
  background: radial-gradient(circle, rgba(251, 191, 36, 0.3), transparent 70%);
  filter: blur(40px);
  pointer-events: none;
}

.tts-btn {
  padding: 8px 16px;
  border-radius: 12px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s;
  border: none;
  display: flex;
  align-items: center;
  gap: 6px;
}

.tts-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.15); }
.tts-btn.speaking { animation: pulse 1.5s ease-in-out infinite; }

@keyframes pulse {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.8; transform: scale(1.05); }
}

.lang-toggle {
  display: inline-flex;
  background: rgba(255, 255, 255, 0.9);
  border-radius: 12px;
  padding: 4px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.lang-toggle button {
  padding: 8px 20px;
  border-radius: 10px;
  transition: all 0.3s;
  font-size: 14px;
  font-weight: 600;
  border: none;
  background: transparent;
  color: #64748b;
}

.lang-toggle button.active {
  background: linear-gradient(135deg, #1e40af, #3b82f6);
  color: white;
  box-shadow: 0 4px 12px rgba(30, 64, 175, 0.4);
  transform: scale(1.05);
}

.query-type-selector {
  background: linear-gradient(135deg, #fef3c7, #fed7aa);
  border: 3px solid #f59e0b;
  border-radius: 20px;
  padding: 20px 16px;
  margin-bottom: 24px;
  box-shadow: 0 8px 24px rgba(245, 158, 11, 0.3);
}

.radio-option {
  position: relative;
  display: flex;
  align-items: flex-start;
  padding: 14px 16px;
  background: white;
  border: 3px solid #e5e7eb;
  border-radius: 16px;
  cursor: pointer;
  transition: all 0.3s;
  margin-bottom: 12px;
  min-height: 80px;
}

.radio-option:last-child { margin-bottom: 0; }

.radio-option:hover {
  border-color: #f59e0b;
  transform: translateX(4px);
  box-shadow: 0 4px 16px rgba(245, 158, 11, 0.2);
}

.radio-option input[type="radio"] {
  width: 22px; height: 22px; min-width: 22px;
  margin-right: 12px; margin-top: 2px;
  cursor: pointer; accent-color: #f59e0b; flex-shrink: 0;
}

.radio-option.selected {
  border-color: #f59e0b;
  background: linear-gradient(135deg, #fffbeb, #fef3c7);
  box-shadow: 0 6px 20px rgba(245, 158, 11, 0.3);
  transform: scale(1.02);
}

.radio-icon {
  font-size: 28px; min-width: 36px; margin-right: 8px;
  flex-shrink: 0; line-height: 1; margin-top: 2px;
}

.radio-label {
  display: flex; flex-direction: column;
  flex: 1; min-width: 0; gap: 2px;
}

.radio-label-title {
  font-size: 16px; font-weight: 700; color: #1f2937;
  line-height: 1.3; word-wrap: break-word;
  overflow-wrap: break-word; hyphens: auto;
}

/* Styles for links in AI response */
#modalAnswer a {
  color: #2563eb;
  text-decoration: underline;
  font-weight: 600;
  transition: all 0.2s;
  word-break: break-all;
}

#modalAnswer a:hover {
  color: #1d4ed8;
  background: rgba(37, 99, 235, 0.1);
  padding: 2px 4px;
  border-radius: 4px;
}

#modalAnswer a:visited {
  color: #7c3aed;
}

.radio-label-desc {
  font-size: 12px; color: #6b7280; line-height: 1.4;
  word-wrap: break-word; overflow-wrap: break-word;
}

.autocomplete-container { position: relative; width: 100%; }

.autocomplete-dropdown {
  position: absolute; top: 100%; left: 0; right: 0;
  background: white; border: 2px solid #f59e0b; border-top: none;
  border-radius: 0 0 16px 16px; max-height: 300px; overflow-y: auto;
  z-index: 1000; box-shadow: 0 8px 24px rgba(245, 158, 11, 0.3);
  margin-top: -8px;
}

.autocomplete-item {
  padding: 12px 16px; cursor: pointer;
  border-bottom: 1px solid #f3f4f6;
  transition: all 0.2s; font-size: 12px; line-height: 1.5;
}

.autocomplete-item:last-child { border-bottom: none; }

.autocomplete-item:hover {
  background: linear-gradient(135deg, #fffbeb, #fef3c7);
  font-weight: 600;
}

.autocomplete-item mark {
  background: #fef3c7; color: #ea580c; font-weight: 700;
  padding: 2px 4px; border-radius: 4px;
}

.autocomplete-no-results {
  padding: 16px; text-align: center;
  color: #6b7280; font-size: 14px;
}

.autocomplete-category {
  padding: 8px 16px; font-size: 11px; font-weight: 700;
  color: #f59e0b; background: #fffbeb;
  text-transform: uppercase; letter-spacing: 0.5px;
  border-bottom: 1px solid #fed7aa;
}

.slide-fade-enter { animation: slideFadeIn 0.5s ease-out; }

@keyframes slideFadeIn {
  from { opacity: 0; transform: translateY(-20px); }
  to { opacity: 1; transform: translateY(0); }
}

#userInput::placeholder {
  font-size: 13px; color: #b5b5b5;
  font-weight: 400; opacity: 0.8;
}

#userInput {
  font-size: 17px !important; font-weight: 600 !important;
  color: #1f2937 !important; line-height: 1.5;
  vertical-align: bottom; width: 100% !important;
  box-sizing: border-box !important; display: block;
}

.icon { display: inline-block; width: 1em; height: 1em; vertical-align: -0.125em; }

.btn-primary {
  background: linear-gradient(135deg, #ff6b35, #f59e0b);
  color: white; font-weight: 700; padding: 18px 32px;
  border-radius: 16px; border: none; cursor: pointer;
  transition: all 0.3s; box-shadow: 0 8px 24px rgba(255, 107, 53, 0.4);
  position: relative; overflow: hidden;
}

.btn-primary::before {
  content: ''; position: absolute; top: 0; left: -100%;
  width: 100%; height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
  transition: left 0.5s;
}

.btn-primary:hover::before { left: 100%; }
.btn-primary:hover { transform: translateY(-2px); box-shadow: 0 12px 32px rgba(255, 107, 53, 0.5); }

.event-card {
  border-radius: 20px; padding: 20px;
  transition: all 0.3s; cursor: pointer;
  position: relative; overflow: hidden;
}

.event-card:hover { transform: translateY(-8px) scale(1.02); box-shadow: 0 16px 40px rgba(0,0,0,0.2); }

.quote-section {
  background: linear-gradient(135deg, #eff6ff, #dbeafe);
  border-left: 6px solid #3b82f6; border-radius: 24px;
  padding: 32px; box-shadow: 0 8px 24px rgba(59, 130, 246, 0.15);
  position: relative; overflow: hidden;
}

.quote-section::before {
  content: '"'; position: absolute; top: -20px; left: 20px;
  font-size: 120px; color: rgba(59, 130, 246, 0.1);
  font-family: Georgia, serif;
}

input, textarea, select { transition: all 0.3s; }
input:focus, textarea:focus, select:focus { transform: translateY(-2px); }

.modal-enter { animation: modalEnter 0.3s ease-out; }

@keyframes modalEnter {
  from { opacity: 0; transform: scale(0.9); }
  to { opacity: 1; transform: scale(1); }
}

.floating { animation: floating 3s ease-in-out infinite; }

@keyframes floating {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-10px); }
}

.feedback-btn {
  background: linear-gradient(135deg, #10b981, #059669);
  color: white; font-weight: 600; padding: 12px 24px;
  border-radius: 12px; border: none; cursor: pointer;
  transition: all 0.3s; box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
  display: inline-flex; align-items: center; gap: 8px; font-size: 14px;
}

.feedback-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(16, 185, 129, 0.5);
  background: linear-gradient(135deg, #059669, #047857);
}

.feedback-btn-small { padding: 8px 16px; font-size: 13px; }

#feedbackModal {
  position: fixed; top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(0, 0, 0, 0.85); z-index: 10000;
  display: none; align-items: center; justify-content: center; padding: 16px;
}

#feedbackModal.show { display: flex; }

.feedback-modal-content {
  background: white; border-radius: 24px; width: 100%;
  max-width: 900px; height: 90vh; max-height: 90vh;
  display: flex; flex-direction: column; overflow: hidden;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
}

.feedback-modal-header {
  background: linear-gradient(135deg, #10b981, #059669);
  color: white; padding: 20px; display: flex;
  justify-content: space-between; align-items: center; flex-shrink: 0;
}

.feedback-modal-close {
  background: rgba(255, 255, 255, 0.2); border: none;
  color: white; width: 36px; height: 36px; border-radius: 50%;
  cursor: pointer; display: flex; align-items: center;
  justify-content: center; transition: all 0.3s;
}

.feedback-modal-close:hover {
  background: rgba(255, 255, 255, 0.3);
  transform: rotate(90deg);
}

#feedbackIframe { width: 100%; height: 100%; border: none; background: white; }

.iframe-loader {
  position: absolute; top: 50%; left: 50%;
  transform: translate(-50%, -50%); text-align: center; z-index: 1;
}

.spinner {
  border: 4px solid #f3f4f6; border-top: 4px solid #10b981;
  border-radius: 50%; width: 50px; height: 50px;
  animation: spin 1s linear infinite; margin: 0 auto 16px;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.om-symbol {
  position: fixed; font-size: 200px; opacity: 0.05;
  color: rgba(251, 191, 36, 0.3); pointer-events: none;
  user-select: none; z-index: 0;
}

.om-top-right { top: -50px; right: -50px; }
.om-bottom-left { bottom: -50px; left: -50px; transform: rotate(180deg); }

.quiz-chatbot-btn, .live-telecast-btn {
  color: white; font-weight: 600; padding: 10px 18px;
  border-radius: 12px; border: none; cursor: pointer;
  transition: all 0.3s; display: inline-flex;
  align-items: center; gap: 8px; font-size: 14px;
  position: relative; overflow: hidden;
}

.quiz-chatbot-btn {
  background: linear-gradient(135deg, #8b5cf6, #6366f1);
  box-shadow: 0 4px 12px rgba(139, 92, 246, 0.4);
}

.live-telecast-btn {
  background: linear-gradient(135deg, #dc2626, #ef4444);
  box-shadow: 0 4px 12px rgba(220, 38, 38, 0.4);
}

.quiz-chatbot-btn::before, .live-telecast-btn::before {
  content: ''; position: absolute; top: 0; left: -100%;
  width: 100%; height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
  transition: left 0.5s;
}

.quiz-chatbot-btn:hover::before, .live-telecast-btn:hover::before { left: 100%; }

.quiz-chatbot-btn:hover {
  transform: translateY(-3px);
  box-shadow: 0 8px 25px rgba(139, 92, 246, 0.5);
  background: linear-gradient(135deg, #7c3aed, #4f46e5);
}

.live-telecast-btn:hover {
  transform: translateY(-3px);
  box-shadow: 0 8px 25px rgba(220, 38, 38, 0.5);
  background: linear-gradient(135deg, #b91c1c, #dc2626);
}

.quiz-chatbot-btn svg, .live-telecast-btn svg {
  width: 20px; height: 20px;
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
}

.live-telecast-btn .pulse-dot {
  width: 8px; height: 8px; background: white;
  border-radius: 50%; animation: pulse-live 1.5s ease-in-out infinite;
}

@keyframes pulse-live {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.5; transform: scale(1.2); }
}

#quizModal {
  position: fixed; top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(0, 0, 0, 0.9); z-index: 10001;
  display: none; align-items: center; justify-content: center; padding: 16px;
}

#quizModal.show { display: flex; }

.quiz-modal-content {
  background: white; border-radius: 24px; width: 100%;
  max-width: 1200px; height: 92vh; max-height: 92vh;
  display: flex; flex-direction: column; overflow: hidden;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
}

.quiz-modal-header {
  background: linear-gradient(135deg, #8b5cf6, #6366f1);
  color: white; padding: 20px; display: flex;
  justify-content: space-between; align-items: center; flex-shrink: 0;
}

.quiz-modal-close {
  background: rgba(255, 255, 255, 0.2); border: none;
  color: white; width: 36px; height: 36px; border-radius: 50%;
  cursor: pointer; display: flex; align-items: center;
  justify-content: center; transition: all 0.3s;
}

.quiz-modal-close:hover {
  background: rgba(255, 255, 255, 0.3);
  transform: rotate(90deg);
}

#quizIframe { width: 100%; height: 100%; border: none; background: white; }

#questionSelect option {
  font-size: 13px !important;
  padding: 8px !important;
  line-height: 1.4;
}

#questionSelect optgroup {
  font-size: 14px !important;
  font-weight: 600;
  color: #1e40af;
}

/* ============================================================================
   MOBILE OPTIMIZATIONS - COMPACT LAYOUT (768px and below)
   ============================================================================ */

@media (max-width: 768px) {
  /* Header Compact */
  .header-glow { padding: 12px 16px 8px !important; }
  .header-glow h1 { font-size: 2.5rem !important; margin-bottom: 4px !important; }
  .header-glow > p { font-size: 11px !important; margin-bottom: 8px !important; }
  .header-glow > div:last-child { padding: 0 8px !important; }
  .header-glow > div:last-child > div { padding: 6px 12px !important; }
  .header-glow > div:last-child h2 { font-size: 10px !important; line-height: 1.3 !important; }
  .live-telecast-btn { padding: 6px 12px !important; font-size: 11px !important; }
  .live-telecast-btn svg { width: 16px !important; height: 16px !important; }

  /* Text Input Compact */
  #userInput {
    min-height: 80px !important; padding: 10px !important;
    padding-bottom: 40px !important; font-size: 15px !important;
    line-height: 1.4 !important;
  }
  #userInput::placeholder { font-size: 11px !important; }
  .mic-btn { padding: 8px !important; bottom: 6px !important; right: 6px !important; }
  .mic-btn svg { width: 20px !important; height: 20px !important; }
  .mb-8 { margin-bottom: 16px !important; }

  /* Event Cards Compact */
  .event-card { padding: 12px !important; border-radius: 12px !important; }
  .event-card svg { width: 28px !important; height: 28px !important; }
  .event-card .flex-1 p:first-child { font-size: 13px !important; line-height: 1.3 !important; }
  .event-card .flex-1 p:last-child { font-size: 10px !important; }
  .event-card a { padding: 6px 12px !important; font-size: 11px !important; margin-top: 6px !important; }
  .grid { gap: 12px !important; }

  /* Quote Section Compact */
  .quote-section { padding: 16px !important; margin-bottom: 16px !important; border-radius: 16px !important; }
  .quote-section > p:first-of-type { font-size: 14px !important; line-height: 1.4 !important; margin-bottom: 8px !important; }
  .quote-section > p:nth-of-type(2) { font-size: 11px !important; margin-bottom: 4px !important; margin-top: 4px !important; }
  .quote-section > p:last-child { font-size: 11px !important; margin-top: 8px !important; line-height: 1.3 !important; }
  .quote-section::before { font-size: 80px !important; top: -15px !important; }

  /* Button Compact */
  .btn-primary { padding: 12px 24px !important; font-size: 16px !important; margin-top: 16px !important; }
  .btn-primary svg { width: 20px !important; height: 20px !important; }
  .feedback-btn { padding: 8px 16px !important; font-size: 12px !important; }
  .feedback-btn svg { width: 16px !important; height: 16px !important; }

  /* Quick Help Compact */
  #quickQuestionsSection label { font-size: 16px !important; }
  .lang-toggle { padding: 3px !important; }
  .lang-toggle button { padding: 6px 14px !important; font-size: 12px !important; }
  #categorySelect, #questionSelect { padding: 10px 12px !important; font-size: 14px !important; }

  /* Overall Padding */
  .container-main { padding: 8px !important; max-width: 100vw; overflow-x: hidden; }
  .container-main > div:last-child { padding: 12px 16px !important; }
  .p-2 { padding: 8px !important; }
  body { padding: 8px !important; }
  * { max-width: 100%; }
}

@media (max-width: 640px) {
  .query-type-selector { padding: 16px 12px; }
  .radio-option { padding: 12px 12px; min-height: 85px; }
  .radio-option input[type="radio"] { width: 20px; height: 20px; min-width: 20px; margin-right: 10px; }
  .radio-icon { font-size: 24px; min-width: 32px; margin-right: 6px; }
  .radio-label-title { font-size: 16px; }
  .radio-label-desc { font-size: 11px; line-height: 1.35; }
  .autocomplete-dropdown { max-height: 250px; }
  .autocomplete-item { padding: 10px 12px; font-size: 11px; }
  #questionSelect option { font-size: 12px !important; padding: 6px !important; }
  #questionSelect optgroup { font-size: 13px !important; }
}

@media (max-width: 375px) {
  .header-glow h1 { font-size: 2rem !important; }
  .event-card .flex-1 p:first-child { font-size: 12px !important; }
  .quote-section > p:first-of-type { font-size: 13px !important; }
  #userInput { min-height: 70px !important; font-size: 14px !important; }
}

@media (max-width: 360px) {
  .radio-icon { font-size: 22px; min-width: 28px; }
  .radio-label-title { font-size: 14px; }
  .radio-label-desc { font-size: 10.5px; }
}   
   /* Fix icon alignment for last two cards (mobile) */
@media (max-width: 640px) {
  .event-card svg {
    width: 32px !important;
    height: 32px !important;
  }

  /* prevents icon from jumping upward */
  .event-card .flex {
    align-items: flex-start !important;
  }

  /* Optional: reduce card padding for tighter fit */
  .event-card {
    padding: 14px !important;
  }
}
/* Related Questions Styling */
#relatedQuestionsSection {
  animation: slideIn 0.4s ease-out;
}

@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

#relatedQuestionsList button:hover {
  transform: translateX(4px);
  box-shadow: 0 4px 12px rgba(147, 51, 234, 0.15);
}
   
</style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-4">
  <div class="om-symbol om-top-right devanagari">‡•ê</div>
  <div class="om-symbol om-bottom-left devanagari">‡•ê</div>

  <div class="container-main w-full max-w-5xl glass-card rounded-3xl shadow-2xl overflow-hidden">
    <div class="relative bg-gradient-to-br from-orange-50 via-amber-50 to-yellow-50 p-6 pb-4 text-center header-glow">
      <div class="flex justify-between items-start mb-4 w-full">
 <button onclick="openPDFGuide()" class="live-telecast-btn" style="background: linear-gradient(135deg, #2563eb, #3b82f6);">
    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" class="w-5 h-5">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"/>
    </svg>
    Tutorial Guide
  </button>
      </div>
      
      <div class="floating">
        <h1 class="text-5xl md:text-6xl font-black gradient-text mb-2 playfair tracking-tight">Haryana DataVista
</h1>
      </div>
      <p class="text-sm text-gray-600 font-semibold mb-3 tracking-wide">Statistical Abstract Chatbot</p>
      
      <div class="w-full max-w-2xl mx-auto px-4">
<!-- SOLUTION 2: Conditional nowrap (Better for very small screens) -->
<div class="bg-white rounded-2xl border-3 border-orange-400 py-2 px-4 shadow-xl transform hover:scale-105 transition-all duration-300">
  <h2 class="text-xs sm:text-sm md:text-base lg:text-lg font-black text-center bg-gradient-to-r from-orange-600 via-orange-500 to-amber-600 bg-clip-text text-transparent sm:whitespace-nowrap leading-tight">
    Department of Economic and Statistical Analysis, Haryana
  </h2>
</div>
      </div>
     </div>

    <div class="p-2">
      <div class="query-type-selector">
        <h3 class="text-xl font-bold text-gray-900 mb-4 text-center flex items-center justify-center gap-2">
          <svg class="w-6 h-6 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
          Area of interest?
        </h3>
        
        <div class="radio-option" onclick="selectQueryType('statistics')">
          <input type="radio" name="queryType" id="statisticsRadio" value="statistics">
          <span class="radio-icon">üìñ</span>
          <label for="statisticsRadio" class="radio-label cursor-pointer">
            <span class="radio-label-title">Learn About Statistics</span>
            <span class="radio-label-desc">Get explanations about statistical terms and concepts</span>
          </label>
        </div>
        
        <div class="radio-option" onclick="selectQueryType('data')">
          <input type="radio" name="queryType" id="dataRadio" value="data">
          <span class="radio-icon">üìä</span>
          <label for="dataRadio" class="radio-label cursor-pointer">
            <span class="radio-label-title">Find Haryana Data</span>
            <span class="radio-label-desc">Search for specific data from Haryana Statistical Abstract</span>
          </label>
        </div>
      </div>

      <div id="questionSection" style="display: none;">
        <div class="mb-8 slide-fade-enter">
          <div class="relative autocomplete-container">
            <textarea
              id="userInput"
              rows="3"
              class="w-full rounded-2xl border-4 border-orange-400 p-4 pb-12 text-gray-900
                     bg-gradient-to-br from-white to-orange-50 shadow-2xl resize-none
                     focus:border-orange-500 focus:ring-4 focus:ring-orange-200 focus:shadow-2xl
                     transition-all duration-300 leading-relaxed"
              placeholder="Type your question here... (e.g., What is literacy rate? Show district-wise population)"
            ></textarea>
            <div id="autocompleteDropdown" class="autocomplete-dropdown" style="display: none;"></div>
            <button
              id="voiceBtn"
              class="mic-btn absolute bottom-3 right-3 text-orange-500 hover:text-orange-700 transition-all duration-300 hover:scale-110 bg-white rounded-full p-3 shadow-lg border-2 border-orange-300"
              title="Click to speak"
            >
              <svg id="micIcon" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"/>
              </svg>
            </button>
          </div>
        </div>

        <div class="mb-8 slide-fade-enter" id="quickQuestionsSection">
          <div class="flex items-center justify-between mb-4">
            <label class="text-lg font-bold text-gray-800">Quick helpüëá</label>
              <div class="flex justify-end mb-2">
                <div class="lang-toggle">
                  <button class="langBtn active" data-lang="English">English</button>
                  <button class="langBtn" data-lang="Hindi">‡§π‡§ø‡§Ç‡§¶‡•Ä</button>
                </div>
              </div>  
          </div>
          <div class="space-y-4">
            <select id="categorySelect" class="block w-full px-5 py-4 text-base border-2 border-gray-200 focus:outline-none focus:ring-3 focus:ring-blue-500 focus:border-blue-500 rounded-2xl bg-white shadow-md transition-all duration-300 font-medium">
              <option value="" selected disabled>Select Topic</option>
            </select>
            <select id="questionSelect" class="block w-full px-5 py-4 text-base border-2 border-gray-200 focus:outline-none focus:ring-3 focus:ring-blue-500 focus:border-blue-500 rounded-2xl bg-white shadow-md transition-all duration-300 font-medium" disabled>
                <option value="" selected disabled>Select Question</option>
            </select> 
          </div>
        </div>
        <!-- File search section removed - use main chat input only -->

        

        <button 
          id="submitBtn" 
          class="w-full mt-4 btn-primary flex items-center justify-center gap-3 text-xl slide-fade-enter"
        >
          <svg class="icon w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"/>
          </svg>
          Submit
        </button>
      </div>


<div class="grid grid-cols-1 sm:grid-cols-2 
            md:grid-cols-none md:grid-flow-col md:auto-cols-max
            gap-4 md:gap-6 mb-4 mt-4 px-2">

  <!-- Haryana Statistical Abstract -->
  <a href="https://esaharyana.gov.in/statistical-wing-publication-reports/" 
     target="_blank" class="block">
    <div class="event-card bg-gradient-to-br from-blue-50 to-blue-100 border-l-4 border-blue-600 
                shadow-lg rounded-xl p-5 hover:shadow-xl transition-all duration-300 hover:scale-105 cursor-pointer">
      <div class="flex items-center gap-3 mb-3">
        <svg class="w-10 h-10 text-blue-600 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
        </svg>
        <div class="flex-1">
          <p class="font-bold text-gray-900 text-base">Haryana Statistical Abstract</p>
          <p class="text-xs text-gray-600 font-medium">‡§π‡§∞‡§ø‡§Ø‡§æ‡§£‡§æ ‡§∏‡§æ‡§Ç‡§ñ‡•ç‡§Ø‡§ø‡§ï‡•Ä‡§Ø ‡§∏‡§æ‡§∞</p>
        </div>
      </div>
    </div>
  </a>

  <!-- India Statistics -->
  <a href="https://www.mospi.gov.in/publications-reports" 
     target="_blank" class="block">
    <div class="event-card bg-gradient-to-br from-green-50 to-green-100 border-l-4 border-green-600 
                shadow-lg rounded-xl p-5 hover:shadow-xl transition-all duration-300 hover:scale-105 cursor-pointer">
      <div class="flex items-center gap-3 mb-3">
<svg class="w-10 h-10 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
        d="M12 8c1.657 0 3-1.343 3-3S13.657 2 12 2 9 3.343 9 5s1.343 3 3 3zm7 8c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 
           1.343-3 3 1.343 3 3 3zm-14 0c1.657 0 3-1.343 3-3S6.657 10 5 10s-3 1.343-3 3 1.343 3 3 3zm10-6l3 2m-6-2l-3 2m3 4v4"/>
</svg>
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064"/>
        </svg>
        <div class="flex-1">
          <p class="font-bold text-gray-900 text-base">India Statistics</p>
          <p class="text-xs text-gray-600 font-medium">‡§≠‡§æ‡§∞‡§§ ‡§∏‡§æ‡§Ç‡§ñ‡•ç‡§Ø‡§ø‡§ï‡•Ä</p>
        </div>
      </div>
    </div>
  </a>

<!-- Cards 3 & 4 wrapped in 2-column grid on mobile -->
<div class="grid grid-cols-2 gap-4 sm:grid-cols-2 md:grid-cols-none md:grid-flow-col md:auto-cols-max">

  <!-- Census Data Card -->
  <a href="https://censusindia.gov.in/" target="_blank" class="block">
    <div class="event-card bg-gradient-to-br from-purple-50 to-purple-100 border-l-4 border-purple-600 
                shadow-lg rounded-xl p-5 hover:shadow-xl transition-all duration-300 hover:scale-105 cursor-pointer">
      <div class="flex items-center gap-3 mb-3">
<svg class="w-10 h-10 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
        d="M7 20v-2a4 4 0 118 0v2m5 0v-2a5 5 0 00-10 0v2M12 11a3 3 0 100-6 3 3 0 000 6z"/>
</svg>
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857..."/>
        </svg>
        <div class="flex-1">
          <p class="font-bold text-gray-900 text-base">Census Data</p>
          <p class="text-xs text-gray-600 font-medium">‡§ú‡§®‡§ó‡§£‡§®‡§æ ‡§°‡•á‡§ü‡§æ</p>
        </div>
      </div>
    </div>
  </a>

  <!-- Open Data Portal Card -->
  <a href="https://data.gov.in/" target="_blank" class="block">
    <div class="event-card bg-gradient-to-br from-orange-50 to-orange-100 border-l-4 border-orange-600 
                shadow-lg rounded-xl p-5 hover:shadow-xl transition-all duration-300 hover:scale-105 cursor-pointer">
      <div class="flex items-center gap-3 mb-3">
<svg class="w-10 h-10 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
        d="M12 3a9 9 0 100 18 9 9 0 000-18zm0 0c2.5 2 4 5.5 4 9s-1.5 7-4 9m0-18c-2.5 2-4 5.5-4 9s1.5 7 4 9m-9-9h18"/>
</svg>
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79..."/>
        </svg>
        <div class="flex-1">
          <p class="font-bold text-gray-900 text-base">Open Data</p>
          <p class="text-xs text-gray-600 font-medium">‡§ñ‡•Å‡§≤‡§æ ‡§°‡•á‡§ü‡§æ</p>
        </div>
      </div>
    </div>
  </a>

</div>

</div>

      <div class="quote-section mb-1">
        <p class="text-xl text-gray-900 text-center leading-relaxed mb-2 relative z-10 font-semibold italic">
          "Without data, you're just another person with an opinion."
        </p>
        <p class="text-right text-gray-600 text-sm mb-1 mt-1 font-medium">‚Äì W. Edwards Deming</p>
        <p class="text-center text-sm text-gray-700 mb-0 mt-2 font-light leading-relaxed">
         <span style="line-height: 1.2; display: block;">Statistics illuminate the path from confusion to clarity,<br>transforming raw numbers into meaningful insights for progress.</span>
        </p>
      </div>

      <div class="mt-6 flex flex-col sm:flex-row items-center justify-center gap-4">
        <button onclick="openFeedback()" class="feedback-btn">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"/>
          </svg>
          Feedback
        </button>
        
        <a href="https://esaharyana.gov.in/" class="inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 font-semibold transition-all hover:scale-105">
          <svg class="icon w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
          </svg>
          Visit ESA Haryana
        </a>
      </div>
    </div>
    
  <div class="border-t-2 border-gray-200 px-6 py-4 text-center bg-gradient-to-b from-gray-50 to-white">
<p class="text-sm text-gray-700 mb-2 font-medium">AI Chatbot powered by <span class="font-bold text-orange-600">Groq + Llama 3.3</span></p>
<p class="text-gray-500 text-xs mb-1">Version: <span class="font-semibold text-gray-700">4.1-STABLE</span></p>
<p class="text-gray-500 text-xs mb-3">Last Updated: <span id="lastModified" style="display: inline;">Loading...</span></p>      <div class="flex flex-wrap justify-center items-center gap-6">
        <img src="https://raw.githubusercontent.com/vksinglakkr/IGM2025/main/Images/haryana-logo.jpg" alt="Haryana" class="w-16 h-16 object-contain opacity-80 hover:opacity-100 transition-all hover:scale-110">
      </div>
    </div>
  </div>

  <div id="aiModal" class="hidden fixed inset-0 flex items-center justify-center p-2" style="z-index: 9999; background: rgba(0,0,0,0.92);">
    <div class="bg-white rounded-3xl shadow-2xl w-full mx-2 modal-enter overflow-hidden" style="max-width: 850px; max-height: 92vh;">
      <div class="flex justify-between items-center px-5 py-4 bg-gradient-to-r from-blue-600 to-indigo-700 text-white">
        <h2 class="text-xl font-bold flex items-center gap-2">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/></svg>
          AI Response
        </h2>
        <button id="closeModal" class="hover:bg-white/20 p-2 rounded-full transition">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
        </button>
      </div>

<!-- ENHANCED VERSION WITH RELATED QUESTIONS -->
<div class="p-5 overflow-y-auto bg-gray-50" style="max-height: calc(92vh - 180px);">
  <div class="mb-5">
    <div class="flex items-center gap-2 mb-2">
      <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
      <p class="font-bold text-gray-900">Question:</p>
      <span id="historyBadge" class="hidden bg-purple-100 text-purple-700 px-2 py-1 rounded-full text-xs font-bold ml-auto">
        üìö Conversation: <span id="historyCount">0</span> prev
      </span>
    </div>
    <div class="bg-gradient-to-br from-blue-50 to-indigo-50 p-4 rounded-2xl border-l-4 border-blue-500">
      <pre id="modalQuestion" class="whitespace-pre-wrap text-gray-800 leading-relaxed"></pre> 
    </div>
  </div>

  <div>
    <div class="flex items-center justify-between mb-2 flex-wrap gap-2">
      <div class="flex items-center gap-2">
        <svg class="w-6 h-6 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/></svg>
        <p class="font-bold text-gray-900">Answer:</p>
      </div>
      <button id="ttsToggle" class="tts-btn bg-gradient-to-r from-orange-500 to-orange-600 text-white">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"/></svg>
        <span id="ttsLabel">Listen</span>
      </button>
    </div>
    <div class="bg-gradient-to-br from-amber-50 to-orange-50 p-4 rounded-2xl border-l-4 border-orange-500">
      <pre id="modalAnswer" class="whitespace-pre-wrap text-gray-800 text-sm leading-loose devanagari"></pre>
    </div>
  </div>

  <!-- ‚úÖ NEW: RELATED QUESTIONS SECTION -->
  <div id="relatedQuestionsSection" class="mt-6" style="display: none;">
    <div class="flex items-center gap-2 mb-3">
      <svg class="w-5 h-5 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
      </svg>
      <p class="font-bold text-gray-900">Related Questions:</p>
    </div>
    <div id="relatedQuestionsList" class="space-y-2">
      <!-- Related questions will be inserted here -->
    </div>
  </div>
</div>
      <div class="border-t-2 border-gray-200 p-3 bg-white flex justify-center gap-2">
<button id="whatsappBtn" class="flex items-center gap-1 px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-xl transition text-sm font-semibold">
  <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
    <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
  </svg>
  Share on WhatsApp
</button>
        <button onclick="openFeedback()" class="feedback-btn feedback-btn-small">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"/>
          </svg>
          Rate Us
        </button>
        <button id="newTopicBtn" class="flex items-center gap-1 bg-gradient-to-r from-purple-600 to-purple-700 text-white px-5 py-2 rounded-xl hover:from-purple-700 hover:to-purple-800 transition text-sm font-bold shadow-lg" title="Start a new conversation topic">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
          </svg>
          New Topic
        </button>
        <button id="closeBtn" class="flex items-center gap-1 bg-gradient-to-r from-blue-600 to-blue-700 text-white px-5 py-2 rounded-xl hover:from-blue-700 hover:to-blue-800 transition text-sm font-bold shadow-lg">
          Close
        </button>
      </div>
    </div>
  </div>

  <div id="feedbackModal">
    <div class="feedback-modal-content">
      <div class="feedback-modal-header">
        <h2 class="text-xl font-bold flex items-center gap-1">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"/>
          </svg>
          Feedback
        </h2>
        <button onclick="closeFeedback()" class="feedback-modal-close">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>
      
      <div style="position: relative; flex: 1;">
        <div id="iframeLoader" class="iframe-loader" style="display: none;">
          <div class="spinner"></div>
          <p style="color: #64748b; font-weight: 600;">Loading feedback form...</p>
        </div>
        <iframe id="feedbackIframe" src=""></iframe>
      </div>
    </div>
  </div>

  <div id="quizModal">
    <div class="quiz-modal-content">
      <div class="quiz-modal-header">
        <h2 class="text-xl font-bold flex items-center gap-2">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
          </svg>
          üé• Tutorial Videos
        </h2>
        <button onclick="closeTutorialVideos()" class="quiz-modal-close">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>
      
      <div style="position: relative; flex: 1; overflow-y: auto; padding: 20px;">
        <div class="space-y-4">
          <!-- Video 1 -->
          <div class="bg-gradient-to-r from-blue-50 to-blue-100 p-5 rounded-xl border-l-4 border-blue-500 hover:shadow-lg transition-all">
            <h3 class="font-bold text-blue-900 text-lg mb-2 flex items-center gap-2">
              <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                <path d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z"/>
              </svg>
              Getting Started with STATS SAHAYAK
            </h3>
            <p class="text-gray-700 text-sm mb-3">Learn the basics of using the chatbot</p>
            <a href="https://www.youtube.com/watch?v=YOUR_VIDEO_ID_1" target="_blank" 
               class="inline-flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm font-semibold">
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                <path d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z"/>
              </svg>
              Watch Tutorial (5 min)
            </a>
          </div>

          <!-- Video 2 -->
          <div class="bg-gradient-to-r from-green-50 to-green-100 p-5 rounded-xl border-l-4 border-green-500 hover:shadow-lg transition-all">
            <h3 class="font-bold text-green-900 text-lg mb-2 flex items-center gap-2">
              <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                <path d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z"/>
              </svg>
              Finding Statistical Data
            </h3>
            <p class="text-gray-700 text-sm mb-3">How to search for district-wise data and reports</p>
            <a href="https://www.youtube.com/watch?v=YOUR_VIDEO_ID_2" target="_blank" 
               class="inline-flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors text-sm font-semibold">
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                <path d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z"/>
              </svg>
              Watch Tutorial (7 min)
            </a>
          </div>

          <!-- Video 3 -->
          <div class="bg-gradient-to-r from-purple-50 to-purple-100 p-5 rounded-xl border-l-4 border-purple-500 hover:shadow-lg transition-all">
            <h3 class="font-bold text-purple-900 text-lg mb-2 flex items-center gap-2">
              <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                <path d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z"/>
              </svg>
              Advanced Features
            </h3>
            <p class="text-gray-700 text-sm mb-3">Voice input, language toggle, and more</p>
            <a href="https://www.youtube.com/watch?v=YOUR_VIDEO_ID_3" target="_blank" 
               class="inline-flex items-center gap-2 bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors text-sm font-semibold">
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                <path d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z"/>
              </svg>
              Watch Tutorial (6 min)
            </a>
          </div>

          <!-- Video 4 -->
          <div class="bg-gradient-to-r from-orange-50 to-orange-100 p-5 rounded-xl border-l-4 border-orange-500 hover:shadow-lg transition-all">
            <h3 class="font-bold text-orange-900 text-lg mb-2 flex items-center gap-2">
              <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                <path d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z"/>
              </svg>
              Understanding Statistical Reports
            </h3>
            <p class="text-gray-700 text-sm mb-3">Learn to interpret data and generate insights</p>
            <a href="https://www.youtube.com/watch?v=YOUR_VIDEO_ID_4" target="_blank" 
               class="inline-flex items-center gap-2 bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 transition-colors text-sm font-semibold">
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                <path d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z"/>
              </svg>
              Watch Tutorial (8 min)
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>

<script>
// ============================================================================
// COMPREHENSIVE STATISTICAL QUESTIONS - DIRECT REPLACEMENT CODE
// Copy lines 1527-1600 and replace with this entire code block
// ============================================================================

const statsQuestions = {
  'üìä Basic Statistical Concepts': {
    'üî¢ Fundamental Terms': [
      "What is statistics?",
      "What is data?",
      "What is population in statistics?",
      "What is a sample?",
      "What is census?",
      "What is the difference between census and sample survey?",
      "What is a variable?",
      "What is qualitative data?",
      "What is quantitative data?"
    ],
    'üìà Central Tendency': [
      "What is mean?",
      "What is median?",
      "What is mode?",
      "What is the difference between mean, median, and mode?",
      "What is weighted mean?",
      "What is percentile?",
      "What is quartile?"
    ],
    'üìâ Dispersion Measures': [
      "What is range in statistics?",
      "What is variance?",
      "What is standard deviation?",
      "What is coefficient of variation?",
      "What is quartile deviation?"
    ]
  },

  'üë• Population Statistics': {
    'üåç Population Basics': [
      "What is population?",
      "What is population density?",
      "How is population density calculated?",
      "What is crude birth rate?",
      "What is crude death rate?",
      "What is natural growth rate?",
      "What is population growth rate?",
      "What is decadal growth rate?"
    ],
    'üë∂ Birth & Death': [
      "What is birth rate?",
      "What is death rate?",
      "What is infant mortality rate?",
      "What is child mortality rate?",
      "What is maternal mortality rate?",
      "What is fertility rate?",
      "What is total fertility rate (TFR)?",
      "What is life expectancy?"
    ],
    'üöª Sex Ratio & Age': [
      "What is sex ratio?",
      "How is sex ratio calculated?",
      "What is child sex ratio?",
      "What is dependency ratio?",
      "What is working age population?",
      "What is age pyramid?"
    ],
    'üèòÔ∏è Rural-Urban': [
      "What is rural population?",
      "What is urban population?",
      "What is urbanization?",
      "What is urban agglomeration?",
      "What is metropolitan city?"
    ]
  },

  'üìö Literacy & Education': {
    'üìñ Literacy': [
      "What is literacy rate?",
      "How is literacy rate calculated?",
      "What is male literacy rate?",
      "What is female literacy rate?",
      "What is adult literacy rate?",
      "What is functional literacy?"
    ],
    'üéì Education Indicators': [
      "What is gross enrollment ratio (GER)?",
      "What is net enrollment ratio (NER)?",
      "What is dropout rate?",
      "What is pupil-teacher ratio?",
      "What is gender parity index in education?"
    ]
  },

  'üí∞ Economic Statistics': {
    'üíµ GDP & Income': [
      "What is Gross Domestic Product (GDP)?",
      "What is per capita income?",
      "What is GSDP?",
      "What is national income?",
      "What is real GDP?",
      "What is nominal GDP?",
      "What is GDP growth rate?"
    ],
    'üìä Price Indices': [
      "What is a Price Index?",
      "What is Consumer Price Index (CPI)?",
      "What is Wholesale Price Index (WPI)?",
      "What is inflation?",
      "What is base year?",
      "What is current price?",
      "What is constant price?"
    ],
    'üíº Employment': [
      "What is unemployment rate?",
      "What is labor force participation rate?",
      "What is work participation rate?",
      "What is workforce?"
    ],
    'üèöÔ∏è Poverty': [
      "What is poverty line?",
      "What is poverty ratio?",
      "What is Below Poverty Line (BPL)?",
      "What is Gini coefficient?"
    ]
  },

  'üåæ Agriculture Statistics': {
    'üöú Land Use': [
      "What is geographical area?",
      "What is net sown area?",
      "What is gross sown area?",
      "What is cropped area?",
      "What is cropping intensity?",
      "What is cultivable land?",
      "What is fallow land?"
    ],
    'üå± Crop Production': [
      "What is yield?",
      "What is crop yield?",
      "What is productivity?",
      "What is Kharif crop?",
      "What is Rabi crop?",
      "What is food grain?",
      "What is cash crop?"
    ],
    'üêÑ Livestock': [
      "What is livestock census?",
      "What is cattle population?",
      "What is milk production?",
      "What is poultry population?"
    ],
    'üíß Irrigation': [
      "What is irrigated area?",
      "What is net irrigated area?",
      "What is irrigation intensity?",
      "What is canal irrigation?",
      "What is tube well irrigation?"
    ]
  },

  'üè≠ Industry & Manufacturing': {
    'üèóÔ∏è Industrial': [
      "What is Index of Industrial Production (IIP)?",
      "What is manufacturing sector?",
      "What is factory?",
      "What is registered factory?",
      "What is industrial growth rate?"
    ],
    '‚ö° Power & Energy': [
      "What is installed capacity?",
      "What is power generation?",
      "What is per capita power consumption?",
      "What is rural electrification?"
    ]
  },

  'üè• Health Statistics': {
    'üë®‚Äç‚öïÔ∏è Health Indicators': [
      "What is morbidity rate?",
      "What is prevalence?",
      "What is incidence?",
      "What is malnutrition?",
      "What is stunting?",
      "What is wasting?"
    ],
    'üè• Healthcare': [
      "What is bed-population ratio?",
      "What is doctor-population ratio?",
      "What is primary health center?",
      "What is immunization coverage?",
      "What is institutional delivery?"
    ]
  },

  'üöó Infrastructure': {
    'üõ£Ô∏è Roads': [
      "What is road density?",
      "What is road length?",
      "What is national highway?",
      "What is state highway?",
      "What is village connectivity?"
    ],
    'üì± Telecom & Banking': [
      "What is teledensity?",
      "What is mobile penetration?",
      "What is internet penetration?",
      "What is bank branch density?",
      "What is credit-deposit ratio?"
    ]
  },

  'üèõÔ∏è Administrative': {
    'üìç Units': [
      "What is district?",
      "What is tehsil?",
      "What is block?",
      "What is gram panchayat?",
      "What is municipality?"
    ],
    'üìä Census Methods': [
      "What is census enumeration?",
      "What is household?",
      "What is household size?",
      "What is reference period?"
    ]
  },

  'üå≥ Environment': {
    'üå≤ Forest & Climate': [
      "What is forest cover?",
      "What is forest density?",
      "What is rainfall?",
      "What is average rainfall?",
      "What is drought?"
    ]
  },

  'üî¢ Advanced Methods': {
    'üìê Analysis': [
      "What is correlation?",
      "What is regression analysis?",
      "What is trend analysis?",
      "What is forecasting?",
      "What is probability?"
    ]
  }
};

// ============================================================================
// HINDI VERSION
// ============================================================================

const statsQuestionsHindi = {
  'üìä ‡§¨‡•Å‡§®‡§ø‡§Ø‡§æ‡§¶‡•Ä ‡§∏‡§æ‡§Ç‡§ñ‡•ç‡§Ø‡§ø‡§ï‡•Ä‡§Ø ‡§Ö‡§µ‡§ß‡§æ‡§∞‡§£‡§æ‡§è‡§Ç': {
    'üî¢ ‡§Æ‡•Ç‡§≤ ‡§∂‡§¨‡•ç‡§¶‡§æ‡§µ‡§≤‡•Ä': [
      "‡§∏‡§æ‡§Ç‡§ñ‡•ç‡§Ø‡§ø‡§ï‡•Ä ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§°‡•á‡§ü‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§∏‡§æ‡§Ç‡§ñ‡•ç‡§Ø‡§ø‡§ï‡•Ä ‡§Æ‡•á‡§Ç ‡§ú‡§®‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§®‡§Æ‡•Ç‡§®‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§ú‡§®‡§ó‡§£‡§®‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§ú‡§®‡§ó‡§£‡§®‡§æ ‡§î‡§∞ ‡§®‡§Æ‡•Ç‡§®‡§æ ‡§∏‡§∞‡•ç‡§µ‡•á‡§ï‡•ç‡§∑‡§£ ‡§Æ‡•á‡§Ç ‡§ï‡•ç‡§Ø‡§æ ‡§Ö‡§Ç‡§§‡§∞ ‡§π‡•à?",
      "‡§ö‡§∞ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§ó‡•Å‡§£‡§æ‡§§‡•ç‡§Æ‡§ï ‡§°‡•á‡§ü‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§Æ‡§æ‡§§‡•ç‡§∞‡§æ‡§§‡•ç‡§Æ‡§ï ‡§°‡•á‡§ü‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?"
    ],
    'üìà ‡§ï‡•á‡§Ç‡§¶‡•ç‡§∞‡•Ä‡§Ø ‡§™‡•ç‡§∞‡§µ‡•É‡§§‡•ç‡§§‡§ø': [
      "‡§Æ‡§æ‡§ß‡•ç‡§Ø ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§Æ‡§ß‡•ç‡§Ø‡§ø‡§ï‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§¨‡§π‡•Å‡§≤‡§ï ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§Æ‡§æ‡§ß‡•ç‡§Ø, ‡§Æ‡§ß‡•ç‡§Ø‡§ø‡§ï‡§æ ‡§î‡§∞ ‡§¨‡§π‡•Å‡§≤‡§ï ‡§Æ‡•á‡§Ç ‡§ï‡•ç‡§Ø‡§æ ‡§Ö‡§Ç‡§§‡§∞ ‡§π‡•à?",
      "‡§≠‡§æ‡§∞‡§ø‡§§ ‡§Æ‡§æ‡§ß‡•ç‡§Ø ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§™‡•ç‡§∞‡§§‡§ø‡§∂‡§§‡§ï ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§ö‡§§‡•Å‡§∞‡•ç‡§•‡§ï ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?"
    ],
    'üìâ ‡§™‡•ç‡§∞‡§ï‡•Ä‡§∞‡•ç‡§£‡§® ‡§ï‡•á ‡§Æ‡§æ‡§™': [
      "‡§∏‡§æ‡§Ç‡§ñ‡•ç‡§Ø‡§ø‡§ï‡•Ä ‡§Æ‡•á‡§Ç ‡§™‡§∞‡§ø‡§∏‡§∞ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§™‡•ç‡§∞‡§∏‡§∞‡§£ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§Æ‡§æ‡§®‡§ï ‡§µ‡§ø‡§ö‡§≤‡§® ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§µ‡§ø‡§ö‡§≤‡§® ‡§ó‡•Å‡§£‡§æ‡§Ç‡§ï ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§ö‡§§‡•Å‡§∞‡•ç‡§•‡§ï ‡§µ‡§ø‡§ö‡§≤‡§® ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?"
    ]
  },

  'üë• ‡§ú‡§®‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ ‡§∏‡§æ‡§Ç‡§ñ‡•ç‡§Ø‡§ø‡§ï‡•Ä': {
    'üåç ‡§ú‡§®‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ ‡§Æ‡•Ç‡§≤': [
      "‡§ú‡§®‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§ú‡§®‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ ‡§ò‡§®‡§§‡•ç‡§µ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§ú‡§®‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ ‡§ò‡§®‡§§‡•ç‡§µ ‡§ï‡•Ä ‡§ó‡§£‡§®‡§æ ‡§ï‡•à‡§∏‡•á ‡§ï‡•Ä ‡§ú‡§æ‡§§‡•Ä ‡§π‡•à?",
      "‡§ï‡§ö‡•ç‡§ö‡•Ä ‡§ú‡§®‡•ç‡§Æ ‡§¶‡§∞ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§ï‡§ö‡•ç‡§ö‡•Ä ‡§Æ‡•É‡§§‡•ç‡§Ø‡•Å ‡§¶‡§∞ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§™‡•ç‡§∞‡§æ‡§ï‡•É‡§§‡§ø‡§ï ‡§µ‡•É‡§¶‡•ç‡§ß‡§ø ‡§¶‡§∞ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§ú‡§®‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ ‡§µ‡•É‡§¶‡•ç‡§ß‡§ø ‡§¶‡§∞ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§¶‡§∂‡§ï‡•Ä‡§Ø ‡§µ‡•É‡§¶‡•ç‡§ß‡§ø ‡§¶‡§∞ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?"
    ],
    'üë∂ ‡§ú‡§®‡•ç‡§Æ ‡§î‡§∞ ‡§Æ‡•É‡§§‡•ç‡§Ø‡•Å': [
      "‡§ú‡§®‡•ç‡§Æ ‡§¶‡§∞ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§Æ‡•É‡§§‡•ç‡§Ø‡•Å ‡§¶‡§∞ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§∂‡§ø‡§∂‡•Å ‡§Æ‡•É‡§§‡•ç‡§Ø‡•Å ‡§¶‡§∞ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§¨‡§æ‡§≤ ‡§Æ‡•É‡§§‡•ç‡§Ø‡•Å ‡§¶‡§∞ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§Æ‡§æ‡§§‡•É ‡§Æ‡•É‡§§‡•ç‡§Ø‡•Å ‡§¶‡§∞ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§™‡•ç‡§∞‡§ú‡§®‡§® ‡§¶‡§∞ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§ï‡•Å‡§≤ ‡§™‡•ç‡§∞‡§ú‡§®‡§® ‡§¶‡§∞ (TFR) ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§ú‡•Ä‡§µ‡§® ‡§™‡•ç‡§∞‡§§‡•ç‡§Ø‡§æ‡§∂‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?"
    ],
    'üöª ‡§≤‡§ø‡§Ç‡§ó‡§æ‡§®‡•Å‡§™‡§æ‡§§ ‡§î‡§∞ ‡§Ü‡§Ø‡•Å': [
      "‡§≤‡§ø‡§Ç‡§ó‡§æ‡§®‡•Å‡§™‡§æ‡§§ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§≤‡§ø‡§Ç‡§ó‡§æ‡§®‡•Å‡§™‡§æ‡§§ ‡§ï‡•Ä ‡§ó‡§£‡§®‡§æ ‡§ï‡•à‡§∏‡•á ‡§ï‡•Ä ‡§ú‡§æ‡§§‡•Ä ‡§π‡•à?",
      "‡§¨‡§æ‡§≤ ‡§≤‡§ø‡§Ç‡§ó‡§æ‡§®‡•Å‡§™‡§æ‡§§ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§®‡§ø‡§∞‡•ç‡§≠‡§∞‡§§‡§æ ‡§Ö‡§®‡•Å‡§™‡§æ‡§§ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§ï‡§æ‡§∞‡•ç‡§Ø‡§∂‡•Ä‡§≤ ‡§Ü‡§Ø‡•Å ‡§ú‡§®‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§Ü‡§Ø‡•Å ‡§™‡§ø‡§∞‡§æ‡§Æ‡§ø‡§° ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?"
    ],
    'üèòÔ∏è ‡§ó‡•ç‡§∞‡§æ‡§Æ‡•Ä‡§£-‡§∂‡§π‡§∞‡•Ä': [
      "‡§ó‡•ç‡§∞‡§æ‡§Æ‡•Ä‡§£ ‡§ú‡§®‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§∂‡§π‡§∞‡•Ä ‡§ú‡§®‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§∂‡§π‡§∞‡•Ä‡§ï‡§∞‡§£ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§∂‡§π‡§∞‡•Ä ‡§∏‡§Æ‡•Ç‡§π‡§® ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§Æ‡§π‡§æ‡§®‡§ó‡§∞‡•Ä‡§Ø ‡§∂‡§π‡§∞ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?"
    ]
  },

  'üìö ‡§∏‡§æ‡§ï‡•ç‡§∑‡§∞‡§§‡§æ ‡§î‡§∞ ‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ': {
    'üìñ ‡§∏‡§æ‡§ï‡•ç‡§∑‡§∞‡§§‡§æ': [
      "‡§∏‡§æ‡§ï‡•ç‡§∑‡§∞‡§§‡§æ ‡§¶‡§∞ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§∏‡§æ‡§ï‡•ç‡§∑‡§∞‡§§‡§æ ‡§¶‡§∞ ‡§ï‡•Ä ‡§ó‡§£‡§®‡§æ ‡§ï‡•à‡§∏‡•á ‡§ï‡•Ä ‡§ú‡§æ‡§§‡•Ä ‡§π‡•à?",
      "‡§™‡•Å‡§∞‡•Å‡§∑ ‡§∏‡§æ‡§ï‡•ç‡§∑‡§∞‡§§‡§æ ‡§¶‡§∞ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§Æ‡§π‡§ø‡§≤‡§æ ‡§∏‡§æ‡§ï‡•ç‡§∑‡§∞‡§§‡§æ ‡§¶‡§∞ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§µ‡§Ø‡§∏‡•ç‡§ï ‡§∏‡§æ‡§ï‡•ç‡§∑‡§∞‡§§‡§æ ‡§¶‡§∞ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§ï‡§æ‡§∞‡•ç‡§Ø‡§æ‡§§‡•ç‡§Æ‡§ï ‡§∏‡§æ‡§ï‡•ç‡§∑‡§∞‡§§‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?"
    ],
    'üéì ‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ ‡§∏‡§Ç‡§ï‡•á‡§§‡§ï': [
      "‡§∏‡§ï‡§≤ ‡§®‡§æ‡§Æ‡§æ‡§Ç‡§ï‡§® ‡§Ö‡§®‡•Å‡§™‡§æ‡§§ (GER) ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§∂‡•Å‡§¶‡•ç‡§ß ‡§®‡§æ‡§Æ‡§æ‡§Ç‡§ï‡§® ‡§Ö‡§®‡•Å‡§™‡§æ‡§§ (NER) ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§°‡•ç‡§∞‡•â‡§™‡§Ü‡§â‡§ü ‡§¶‡§∞ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§õ‡§æ‡§§‡•ç‡§∞-‡§∂‡§ø‡§ï‡•ç‡§∑‡§ï ‡§Ö‡§®‡•Å‡§™‡§æ‡§§ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ ‡§Æ‡•á‡§Ç ‡§≤‡•à‡§Ç‡§ó‡§ø‡§ï ‡§∏‡§Æ‡§æ‡§®‡§§‡§æ ‡§∏‡•Ç‡§ö‡§ï‡§æ‡§Ç‡§ï ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?"
    ]
  },

  'üí∞ ‡§Ü‡§∞‡•ç‡§•‡§ø‡§ï ‡§∏‡§æ‡§Ç‡§ñ‡•ç‡§Ø‡§ø‡§ï‡•Ä': {
    'üíµ GDP ‡§î‡§∞ ‡§Ü‡§Ø': [
      "‡§∏‡§ï‡§≤ ‡§ò‡§∞‡•á‡§≤‡•Ç ‡§â‡§§‡•ç‡§™‡§æ‡§¶ (GDP) ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§™‡•ç‡§∞‡§§‡§ø ‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø ‡§Ü‡§Ø ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "GSDP ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞‡•Ä‡§Ø ‡§Ü‡§Ø ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§µ‡§æ‡§∏‡•ç‡§§‡§µ‡§ø‡§ï GDP ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§®‡§æ‡§Æ‡§Æ‡§æ‡§§‡•ç‡§∞ GDP ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "GDP ‡§µ‡•É‡§¶‡•ç‡§ß‡§ø ‡§¶‡§∞ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?"
    ],
    'üìä ‡§Æ‡•Ç‡§≤‡•ç‡§Ø ‡§∏‡•Ç‡§ö‡§ï‡§æ‡§Ç‡§ï': [
      "‡§Æ‡•Ç‡§≤‡•ç‡§Ø ‡§∏‡•Ç‡§ö‡§ï‡§æ‡§Ç‡§ï ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§â‡§™‡§≠‡•ã‡§ï‡•ç‡§§‡§æ ‡§Æ‡•Ç‡§≤‡•ç‡§Ø ‡§∏‡•Ç‡§ö‡§ï‡§æ‡§Ç‡§ï (CPI) ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§•‡•ã‡§ï ‡§Æ‡•Ç‡§≤‡•ç‡§Ø ‡§∏‡•Ç‡§ö‡§ï‡§æ‡§Ç‡§ï (WPI) ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§Æ‡•Å‡§¶‡•ç‡§∞‡§æ‡§∏‡•ç‡§´‡•Ä‡§§‡§ø ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§Ü‡§ß‡§æ‡§∞ ‡§µ‡§∞‡•ç‡§∑ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§Æ‡•Ç‡§≤‡•ç‡§Ø ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§∏‡•ç‡§•‡§ø‡§∞ ‡§Æ‡•Ç‡§≤‡•ç‡§Ø ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?"
    ],
    'üíº ‡§∞‡•ã‡§ú‡§ó‡§æ‡§∞': [
      "‡§¨‡•á‡§∞‡•ã‡§ú‡§ó‡§æ‡§∞‡•Ä ‡§¶‡§∞ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§∂‡•ç‡§∞‡§Æ ‡§¨‡§≤ ‡§≠‡§æ‡§ó‡•Ä‡§¶‡§æ‡§∞‡•Ä ‡§¶‡§∞ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§ï‡§æ‡§∞‡•ç‡§Ø ‡§≠‡§æ‡§ó‡•Ä‡§¶‡§æ‡§∞‡•Ä ‡§¶‡§∞ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§ï‡§æ‡§∞‡•ç‡§Ø‡§¨‡§≤ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?"
    ],
    'üèöÔ∏è ‡§ó‡§∞‡•Ä‡§¨‡•Ä': [
      "‡§ó‡§∞‡•Ä‡§¨‡•Ä ‡§∞‡•á‡§ñ‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§ó‡§∞‡•Ä‡§¨‡•Ä ‡§Ö‡§®‡•Å‡§™‡§æ‡§§ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§ó‡§∞‡•Ä‡§¨‡•Ä ‡§∞‡•á‡§ñ‡§æ ‡§∏‡•á ‡§®‡•Ä‡§ö‡•á (BPL) ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§ó‡§ø‡§®‡•Ä ‡§ó‡•Å‡§£‡§æ‡§Ç‡§ï ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?"
    ]
  },

  'üåæ ‡§ï‡•É‡§∑‡§ø ‡§∏‡§æ‡§Ç‡§ñ‡•ç‡§Ø‡§ø‡§ï‡•Ä': {
    'üöú ‡§≠‡•Ç‡§Æ‡§ø ‡§â‡§™‡§Ø‡•ã‡§ó': [
      "‡§≠‡•å‡§ó‡•ã‡§≤‡§ø‡§ï ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§∂‡•Å‡§¶‡•ç‡§ß ‡§¨‡•ã‡§Ø‡§æ ‡§ó‡§Ø‡§æ ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§∏‡§ï‡§≤ ‡§¨‡•ã‡§Ø‡§æ ‡§ó‡§Ø‡§æ ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§´‡§∏‡§≤‡•Ä ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§´‡§∏‡§≤ ‡§∏‡§ò‡§®‡§§‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§ï‡•É‡§∑‡§ø ‡§Ø‡•ã‡§ó‡•ç‡§Ø ‡§≠‡•Ç‡§Æ‡§ø ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§™‡§∞‡§§‡•Ä ‡§≠‡•Ç‡§Æ‡§ø ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?"
    ],
    'üå± ‡§´‡§∏‡§≤ ‡§â‡§§‡•ç‡§™‡§æ‡§¶‡§®': [
      "‡§â‡§™‡§ú ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§´‡§∏‡§≤ ‡§â‡§™‡§ú ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§â‡§§‡•ç‡§™‡§æ‡§¶‡§ï‡§§‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§ñ‡§∞‡•Ä‡§´ ‡§´‡§∏‡§≤ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§∞‡§¨‡•Ä ‡§´‡§∏‡§≤ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§ñ‡§æ‡§¶‡•ç‡§Ø‡§æ‡§®‡•ç‡§® ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§®‡§ï‡§¶‡•Ä ‡§´‡§∏‡§≤ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?"
    ],
    'üêÑ ‡§™‡§∂‡•Å‡§ß‡§®': [
      "‡§™‡§∂‡•Å‡§ß‡§® ‡§ú‡§®‡§ó‡§£‡§®‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§™‡§∂‡•Å ‡§ú‡§®‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§¶‡•Å‡§ó‡•ç‡§ß ‡§â‡§§‡•ç‡§™‡§æ‡§¶‡§® ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§ï‡•Å‡§ï‡•ç‡§ï‡•Å‡§ü ‡§ú‡§®‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?"
    ],
    'üíß ‡§∏‡§ø‡§Ç‡§ö‡§æ‡§à': [
      "‡§∏‡§ø‡§Ç‡§ö‡§ø‡§§ ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§∂‡•Å‡§¶‡•ç‡§ß ‡§∏‡§ø‡§Ç‡§ö‡§ø‡§§ ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§∏‡§ø‡§Ç‡§ö‡§æ‡§à ‡§∏‡§ò‡§®‡§§‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§®‡§π‡§∞ ‡§∏‡§ø‡§Ç‡§ö‡§æ‡§à ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§®‡§≤‡§ï‡•Ç‡§™ ‡§∏‡§ø‡§Ç‡§ö‡§æ‡§à ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?"
    ]
  },

  'üè≠ ‡§â‡§¶‡•ç‡§Ø‡•ã‡§ó ‡§î‡§∞ ‡§µ‡§ø‡§®‡§ø‡§∞‡•ç‡§Æ‡§æ‡§£': {
    'üèóÔ∏è ‡§î‡§¶‡•ç‡§Ø‡•ã‡§ó‡§ø‡§ï': [
      "‡§î‡§¶‡•ç‡§Ø‡•ã‡§ó‡§ø‡§ï ‡§â‡§§‡•ç‡§™‡§æ‡§¶‡§® ‡§∏‡•Ç‡§ö‡§ï‡§æ‡§Ç‡§ï (IIP) ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§µ‡§ø‡§®‡§ø‡§∞‡•ç‡§Æ‡§æ‡§£ ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§ï‡§æ‡§∞‡§ñ‡§æ‡§®‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§™‡§Ç‡§ú‡•Ä‡§ï‡•É‡§§ ‡§ï‡§æ‡§∞‡§ñ‡§æ‡§®‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§î‡§¶‡•ç‡§Ø‡•ã‡§ó‡§ø‡§ï ‡§µ‡•É‡§¶‡•ç‡§ß‡§ø ‡§¶‡§∞ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?"
    ],
    '‚ö° ‡§¨‡§ø‡§ú‡§≤‡•Ä ‡§î‡§∞ ‡§ä‡§∞‡•ç‡§ú‡§æ': [
      "‡§∏‡•ç‡§•‡§æ‡§™‡§ø‡§§ ‡§ï‡•ç‡§∑‡§Æ‡§§‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§¨‡§ø‡§ú‡§≤‡•Ä ‡§â‡§§‡•ç‡§™‡§æ‡§¶‡§® ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§™‡•ç‡§∞‡§§‡§ø ‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø ‡§¨‡§ø‡§ú‡§≤‡•Ä ‡§ñ‡§™‡§§ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§ó‡•ç‡§∞‡§æ‡§Æ‡•Ä‡§£ ‡§µ‡§ø‡§¶‡•ç‡§Ø‡•Å‡§§‡•Ä‡§ï‡§∞‡§£ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?"
    ]
  },

  'üè• ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§∏‡§æ‡§Ç‡§ñ‡•ç‡§Ø‡§ø‡§ï‡•Ä': {
    'üë®‚Äç‚öïÔ∏è ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§∏‡§Ç‡§ï‡•á‡§§‡§ï': [
      "‡§∞‡•Å‡§ó‡•ç‡§£‡§§‡§æ ‡§¶‡§∞ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§µ‡•ç‡§Ø‡§æ‡§™‡§ï‡§§‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§ò‡§ü‡§®‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§ï‡•Å‡§™‡•ã‡§∑‡§£ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§¨‡•å‡§®‡§æ‡§™‡§® ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§ï‡•ç‡§∑‡•Ä‡§£‡§§‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?"
    ],
    'üè• ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§∏‡•á‡§µ‡§æ': [
      "‡§¨‡§ø‡§∏‡•ç‡§§‡§∞-‡§ú‡§®‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ ‡§Ö‡§®‡•Å‡§™‡§æ‡§§ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§°‡•â‡§ï‡•ç‡§ü‡§∞-‡§ú‡§®‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ ‡§Ö‡§®‡•Å‡§™‡§æ‡§§ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§ï‡•á‡§Ç‡§¶‡•ç‡§∞ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§ü‡•Ä‡§ï‡§æ‡§ï‡§∞‡§£ ‡§ï‡§µ‡§∞‡•á‡§ú ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§∏‡§Ç‡§∏‡•ç‡§•‡§æ‡§ó‡§§ ‡§™‡•ç‡§∞‡§∏‡§µ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?"
    ]
  },

  'üöó ‡§¨‡•Å‡§®‡§ø‡§Ø‡§æ‡§¶‡•Ä ‡§¢‡§æ‡§Ç‡§ö‡§æ': {
    'üõ£Ô∏è ‡§∏‡§°‡§º‡§ï‡•á‡§Ç': [
      "‡§∏‡§°‡§º‡§ï ‡§ò‡§®‡§§‡•ç‡§µ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§∏‡§°‡§º‡§ï ‡§≤‡§Ç‡§¨‡§æ‡§à ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞‡•Ä‡§Ø ‡§∞‡§æ‡§ú‡§Æ‡§æ‡§∞‡•ç‡§ó ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§∞‡§æ‡§ú‡•ç‡§Ø ‡§∞‡§æ‡§ú‡§Æ‡§æ‡§∞‡•ç‡§ó ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§ó‡§æ‡§Ç‡§µ ‡§ï‡§®‡•á‡§ï‡•ç‡§ü‡§ø‡§µ‡§ø‡§ü‡•Ä ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?"
    ],
    'üì± ‡§¶‡•Ç‡§∞‡§∏‡§Ç‡§ö‡§æ‡§∞ ‡§î‡§∞ ‡§¨‡•à‡§Ç‡§ï‡§ø‡§Ç‡§ó': [
      "‡§ü‡•á‡§≤‡•Ä‡§°‡•á‡§Ç‡§∏‡§ø‡§ü‡•Ä ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§™‡•à‡§† ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§á‡§Ç‡§ü‡§∞‡§®‡•á‡§ü ‡§™‡•à‡§† ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§¨‡•à‡§Ç‡§ï ‡§∂‡§æ‡§ñ‡§æ ‡§ò‡§®‡§§‡•ç‡§µ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§ã‡§£-‡§ú‡§Æ‡§æ ‡§Ö‡§®‡•Å‡§™‡§æ‡§§ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?"
    ]
  },

  'üèõÔ∏è ‡§™‡•ç‡§∞‡§∂‡§æ‡§∏‡§®‡§ø‡§ï': {
    'üìç ‡§á‡§ï‡§æ‡§á‡§Ø‡§æ‡§Ç': [
      "‡§ú‡§ø‡§≤‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§§‡§π‡§∏‡•Ä‡§≤ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§¨‡•ç‡§≤‡•â‡§ï ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§ó‡•ç‡§∞‡§æ‡§Æ ‡§™‡§Ç‡§ö‡§æ‡§Ø‡§§ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§®‡§ó‡§∞‡§™‡§æ‡§≤‡§ø‡§ï‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?"
    ],
    'üìä ‡§ú‡§®‡§ó‡§£‡§®‡§æ ‡§µ‡§ø‡§ß‡§ø‡§Ø‡§æ‡§Ç': [
      "‡§ú‡§®‡§ó‡§£‡§®‡§æ ‡§ó‡§£‡§®‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§™‡§∞‡§ø‡§µ‡§æ‡§∞ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§™‡§∞‡§ø‡§µ‡§æ‡§∞ ‡§ï‡§æ ‡§Ü‡§ï‡§æ‡§∞ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§∏‡§Ç‡§¶‡§∞‡•ç‡§≠ ‡§Ö‡§µ‡§ß‡§ø ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?"
    ]
  },

  'üå≥ ‡§™‡§∞‡•ç‡§Ø‡§æ‡§µ‡§∞‡§£': {
    'üå≤ ‡§µ‡§® ‡§î‡§∞ ‡§ú‡§≤‡§µ‡§æ‡§Ø‡•Å': [
      "‡§µ‡§® ‡§Ü‡§ö‡•ç‡§õ‡§æ‡§¶‡§® ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§µ‡§® ‡§ò‡§®‡§§‡•ç‡§µ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§µ‡§∞‡•ç‡§∑‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§î‡§∏‡§§ ‡§µ‡§∞‡•ç‡§∑‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§∏‡•Ç‡§ñ‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?"
    ]
  },

  'üî¢ ‡§â‡§®‡•ç‡§®‡§§ ‡§µ‡§ø‡§ß‡§ø‡§Ø‡§æ‡§Ç': {
    'üìê ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£': [
      "‡§∏‡§π‡§∏‡§Ç‡§¨‡§Ç‡§ß ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§™‡•ç‡§∞‡§§‡§ø‡§ó‡§Æ‡§® ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§™‡•ç‡§∞‡§µ‡•É‡§§‡•ç‡§§‡§ø ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§™‡•Ç‡§∞‡•ç‡§µ‡§æ‡§®‡•Å‡§Æ‡§æ‡§® ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
      "‡§™‡•ç‡§∞‡§æ‡§Ø‡§ø‡§ï‡§§‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?"
    ]
  }
};

let selectedLanguage = 'English';
let selectedQueryType = null; // ‚úÖ FIX: No default selection - user must choose
let currentQuestions = {};
let allQuestions = [];
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// GOOGLE SHEETS CONFIGURATION
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const GOOGLE_SHEET_URL = 'https://docs.google.com/spreadsheets/d/17mpGz4-lw-xBYqDiHj7RV1z0w_5k8lEmSmVqsxS36ro/export?format=tsv&gid=740242886';

// File Search Variables - LOADED FROM GOOGLE SHEETS (TSV FORMAT)
let masterFileData = [];
let selectedFileItem = null;
    
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// COMPREHENSIVE DEBUG LOGGING
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');
console.log('üîç STATS SAHAYAK DEBUG MODE');
console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');
console.log('‚úì Script loading started');
console.log('‚úì GOOGLE_SHEET_URL:', GOOGLE_SHEET_URL);
console.log('‚úì Document ready state:', document.readyState);
console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');

const FILE_API_ENDPOINT = 'https://n8n-workflow-test.duckdns.org/webhook/stat-abstract'; // ‚ö†Ô∏è ADD YOUR N8N WEBHOOK URL    

// DOM elements - will be accessed when needed (after page loads)
let categorySelect;
let questionSelect;
let questionSection;
let userInput;
let autocompleteDropdown;

// Initialize DOM elements after page loads
function initDOMElements() {
  categorySelect = document.getElementById('categorySelect');
  questionSelect = document.getElementById('questionSelect');
  questionSection = document.getElementById('questionSection');
  userInput = document.getElementById('userInput');
  autocompleteDropdown = document.getElementById('autocompleteDropdown');
}

// ============================================================================
// STATABS CHATBOT - CORRECTED FUNCTION UPDATES
// ============================================================================
// Copy your original HTML file and replace these functions with the code below
// ============================================================================

// FUNCTION 1: selectQueryType (Replace around line 1595)
// ============================================================================
function selectQueryType(type) {
  console.log('üîò selectQueryType called with:', type);
  
  // Always ensure DOM elements are initialized
  if (!categorySelect || !questionSection) {
    console.log('   Initializing DOM elements...');
    initDOMElements();
  }
  
  console.log('   DOM elements status:', {
    categorySelect: !!categorySelect,
    questionSelect: !!questionSelect,
    questionSection: !!questionSection,
    userInput: !!userInput,
    autocompleteDropdown: !!autocompleteDropdown
  });
  
  selectedQueryType = type;
  console.log('   selectedQueryType set to:', selectedQueryType);
  
  document.querySelectorAll('.radio-option').forEach(opt => opt.classList.remove('selected'));
  const clickedOption = type === 'statistics' ? 
    document.querySelector('.radio-option:first-of-type') : 
    document.querySelector('.radio-option:last-of-type');
  clickedOption.classList.add('selected');
  
  // ‚úÖ FIX 1: Clear textbox when switching radio buttons
  userInput.value = '';
  autocompleteDropdown.style.display = 'none';
  
  if (type === 'statistics') {
    document.getElementById('statisticsRadio').checked = true;
    document.getElementById('userInput').placeholder = 'Type your question here...';
    
    // Make textbox fully editable for statistics mode
    userInput.readOnly = false;
    userInput.style.backgroundColor = '';
    userInput.style.cursor = 'text';
    
    // Show quick questions
    document.getElementById('quickQuestionsSection').style.display = 'block';
    
  } else {
    document.getElementById('dataRadio').checked = true;
    document.getElementById('userInput').placeholder = 'Start typing to search questions...';
    
    // ‚úÖ FIX 2 CORRECTED: Keep textbox editable so dropdown works!
    // User can type to search, but we'll guide them with placeholder
    userInput.readOnly = false;
    userInput.style.backgroundColor = '';
    userInput.style.cursor = 'text';
    
    // Hide quick questions
    document.getElementById('quickQuestionsSection').style.display = 'none';
    
    // Load master file data if not loaded
    if (masterFileData.length === 0) {
      loadMasterFileData();
    }
  }
  
  console.log('   Loading categories...');
  loadCategories();
  
  console.log('   Building questions list...');
  buildAllQuestionsList();
  
  // Show question section - with safety check
  console.log('   Showing question section...');
  console.log('   questionSection exists?', !!questionSection);
  
  if (questionSection) {
    questionSection.style.display = 'block';
    console.log('   ‚úÖ Question section displayed!');
  } else {
    console.error('   ‚ùå questionSection not found!');
    initDOMElements();
    if (questionSection) {
      questionSection.style.display = 'block';
      console.log('   ‚úÖ Question section displayed after re-init!');
    } else {
      console.error('   ‚ùå Still cannot find questionSection');
    }
  }
  
  console.log('üîò selectQueryType completed');
}

function loadCategories() {
  if (!categorySelect || !questionSelect) {
    console.error('loadCategories: DOM elements not initialized!');
    initDOMElements();
    if (!categorySelect || !questionSelect) {
      console.error('loadCategories: Still unable to find DOM elements');
      return;
    }
  }
  
  categorySelect.innerHTML = '<option value="" selected disabled>Select Topic</option>';
  questionSelect.innerHTML = '<option value="" selected disabled>Select Question</option>';
  questionSelect.disabled = true;
  
  // For statistics mode, use predefined questions
  // For data mode, we'll use Google Sheets data (masterFileData) instead
  if (selectedQueryType === 'statistics') {
    currentQuestions = selectedLanguage === 'Hindi' ? statsQuestionsHindi : statsQuestions;
    
    Object.keys(currentQuestions).forEach(category => {
      const option = document.createElement('option');
      option.value = category;
      option.textContent = formatCategoryName(category);
      
      // Add special color classes to specific categories
      if (category.includes('Cultural') || category.includes('‡§∏‡§æ‡§Ç‡§∏‡•ç‡§ï‡•É‡§§‡§ø‡§ï')) {
        option.classList.add('category-cultural');
      } else if (category.includes('Religious') || category.includes('‡§ß‡§æ‡§∞‡•ç‡§Æ‡§ø‡§ï')) {
        option.classList.add('category-religious');
      } else if (category.includes('Date') || category.includes('‡§§‡§æ‡§∞‡•Ä‡§ñ')) {
        option.classList.add('category-date');
      }
      
      categorySelect.appendChild(option);
    });
  } else {
    // Data mode - categories will be populated from Google Sheets
    // For now, just set a placeholder
    currentQuestions = {};
    console.log('Data mode: Categories will be loaded from Google Sheets');
  }
}
function buildAllQuestionsList() {
  allQuestions = [];
  
  // For statistics mode, use predefined questions
  // For data mode, we'll use Google Sheets data (masterFileData) instead
  if (selectedQueryType === 'statistics') {
    currentQuestions = selectedLanguage === 'Hindi' ? statsQuestionsHindi : statsQuestions;
    
    Object.keys(currentQuestions).forEach(mainCategory => {
      const subcategories = currentQuestions[mainCategory];
      
      // Loop through subcategories
      Object.keys(subcategories).forEach(subcategory => {
        subcategories[subcategory].forEach(question => {
          allQuestions.push({
            question: question,
            category: formatCategoryName(mainCategory),
            subcategory: subcategory
          });
        });
      });
    });
  } else {
    // Data mode - questions will come from masterFileData (Google Sheets)
    currentQuestions = {};
    console.log('Data mode: Questions will be loaded from Google Sheets');
  }
}

function formatCategoryName(category) {
  // Just remove underscores and return as-is to preserve original capitalization
  // including parentheses content like (Dharamshalas)
  return category.replace(/_/g, ' ');
}

// AUTOCOMPLETE FUNCTIONALITY
function highlightMatch(text, query) {
  const regex = new RegExp(`(${query})`, 'gi');
  return text.replace(regex, '<mark>$1</mark>');
}

function filterQuestions(query) {
  if (!query || query.length < 1) {
    return [];
  }
  
  query = query.toLowerCase().trim();
  const keywords = query.split(/\s+/);
  
  return allQuestions.filter(item => {
    const questionLower = item.question.toLowerCase();
    
    // Better matching for 3-4 character searches
    if (query.length >= 3 && query.length <= 4) {
      const wordBoundaryMatch = new RegExp(`\\b${query}`, 'i').test(questionLower);
      const consecutiveMatch = questionLower.includes(query);
      return wordBoundaryMatch || consecutiveMatch;
    }
    
    return keywords.some(keyword => questionLower.includes(keyword));
  }); // Show ALL matching suggestions (no limit)
}

function initUserInputListener() {
  if (!userInput) initDOMElements();
  
  userInput.addEventListener('input', function() {
    const query = this.value.trim();
    
    if (query.length < 2) {
      autocompleteDropdown.style.display = 'none';
      return;
    }
    
    // Check which mode we're in
    if (selectedQueryType === 'data') {
      // DATA MODE - Search in masterFileData (Google Sheets)
      performFileSearch(query);
    } else {
      // STATISTICS MODE - Search in hardcoded questions
      const matches = filterQuestions(query);
  
  if (matches.length === 0) {
    autocompleteDropdown.innerHTML = '<div class="autocomplete-no-results">No matching questions found. Try different keywords.</div>';
    autocompleteDropdown.style.display = 'block';
    return;
  }
  
  let html = '';
  let lastCategory = '';
  
  matches.forEach(item => {
    if (item.category !== lastCategory) {
      html += `<div class="autocomplete-category">${item.category}</div>`;
      lastCategory = item.category;
    }
    
    const highlightedQuestion = highlightMatch(item.question, query);
    html += `<div class="autocomplete-item" data-question="${item.question}">${highlightedQuestion}</div>`;
  });
  
  autocompleteDropdown.innerHTML = html;
  autocompleteDropdown.style.display = 'block';
  
  // Add click handlers
  document.querySelectorAll('.autocomplete-item').forEach(item => {
    item.addEventListener('click', function() {
      userInput.value = this.getAttribute('data-question');
      autocompleteDropdown.style.display = 'none';
    });
  });
    } // End of statistics mode
  }); // End of input event listener

  // Close dropdown on ESC key
  userInput.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
      autocompleteDropdown.style.display = 'none';
    }
  });
  
  console.log('‚úÖ User input autocomplete initialized');
}

// Initialize dropdown event listeners (must run after DOM is ready)
function initDropdownListeners() {
  if (!categorySelect || !questionSelect) initDOMElements();
  
  categorySelect.addEventListener('change', function() {
    questionSelect.innerHTML = '<option value="" selected disabled>Select Question</option>';
    questionSelect.disabled = false;
    
    const selectedCategory = this.value;
    const categoryData = currentQuestions[selectedCategory];
    
    if (categoryData) {
      // categoryData is now an object with subcategories
      Object.keys(categoryData).forEach(subcategory => {
        // Add optgroup for subcategory
        const optgroup = document.createElement('optgroup');
        optgroup.label = subcategory;
        
        // Add questions under this subcategory
        categoryData[subcategory].forEach(question => {
          const option = document.createElement('option');
          option.value = question;
          option.textContent = question;
          optgroup.appendChild(option);
        });
        
        questionSelect.appendChild(optgroup);
      });
    }
  });

  questionSelect.addEventListener('change', function() {
    userInput.value = this.value;
    autocompleteDropdown.style.display = 'none';
  });
}

// Initialize language buttons and TTS (must run after DOM ready)
function initLanguageAndTTS() {
  document.querySelectorAll('.langBtn').forEach(btn => {
    btn.addEventListener('click', function() {
      selectedLanguage = this.getAttribute('data-lang');
      document.querySelectorAll('.langBtn').forEach(b => b.classList.remove('active'));
      this.classList.add('active');
      loadCategories();
      buildAllQuestionsList();
    });
  });

  const ttsBtn = document.getElementById('ttsToggle');
  const ttsLabel = document.getElementById('ttsLabel');

  ttsBtn.addEventListener('click', () => {
    if (isSpeaking) {
      manualStop = true;
      speechSynthesis.cancel();
      isSpeaking = false;
      ttsBtn.classList.remove('speaking');
      ttsLabel.textContent = 'Listen';
      return;
    }
    
    manualStop = false;
    const answerText = document.getElementById('modalAnswer').textContent;
    
    if (!answerText || answerText === 'Thinking...') {
      alert('No answer to read yet!');
      return;
    }
    
    if (!('speechSynthesis' in window)) {
      alert('Text-to-speech is not supported in your browser.');
      return;
    }
    
    ttsUtterance = new SpeechSynthesisUtterance(answerText);
    ttsUtterance.rate = 0.9;
    ttsUtterance.pitch = 1;
    ttsUtterance.volume = 1;
  
// ========================================================================
  // SMART TTS WITH LANGUAGE DETECTION - Lines 1760-1824 Replacement
  // ========================================================================
  
  const voices = speechSynthesis.getVoices();
  
  // ========================================================================
  // DETECT LANGUAGE (Hindi vs English)
  // ========================================================================
  function detectLanguage(text) {
    const cleanText = text.replace(/[‡•§‡••.,!?;:\-\_\n\r]/g, ' ').trim();
    const hindiCharCount = (cleanText.match(/[\u0900-\u097F]/g) || []).length;
    const englishCharCount = (cleanText.match(/[a-zA-Z]/g) || []).length;
    const totalChars = hindiCharCount + englishCharCount;
    
    if (totalChars === 0) return 'en';
    const hindiPercentage = (hindiCharCount / totalChars) * 100;
    
    return hindiPercentage > 30 ? 'hi' : 'en';
  }
  
  const detectedLang = detectLanguage(answerText);
  console.log('üîç Detected Language:', detectedLang);
  
  // ========================================================================
  // VERSION 24 STYLE - Auto-working TTS (No voice installation needed!)
  // ========================================================================
  
  // Set language HINT - let browser choose best voice automatically
  if (detectedLang === 'hi') {
    ttsUtterance.lang = 'hi-IN';  // Hint: This is Hindi text
    console.log('üì¢ Language hint: Hindi');
  } else {
    ttsUtterance.lang = 'en-US';  // Hint: This is English text
    console.log('üì¢ Language hint: English');
  }
  
  // OPTIONAL: Try to use better voice if available, but DON'T FORCE
  // (voices already declared above at line 1797)
  console.log('üìä Available voices:', voices.length);
  
  if (voices.length > 0 && detectedLang === 'hi') {
    // Try to find Hindi voice (optional enhancement)
    const hindiVoice = voices.find(voice => 
      voice.lang === 'hi-IN' || 
      (voice.lang && voice.lang.startsWith('hi'))
    );
    
    if (hindiVoice) {
      ttsUtterance.voice = hindiVoice;
      console.log('‚úÖ Using installed Hindi voice:', hindiVoice.name);
    } else {
      // NO HINDI VOICE - Don't force English voice!
      // Leave voice undefined ‚Üí browser uses multilingual system default
      console.log('‚ÑπÔ∏è No Hindi voice found - using system default (multilingual TTS)');
      console.log('   System will read Hindi reasonably using phonetic rules');
    }
  } else if (voices.length > 0 && detectedLang === 'en') {
    // For English, try to find best English voice
    const englishVoice = voices.find(v => 
      v.lang === 'en-US' || v.lang === 'en-GB' || v.lang === 'en-IN'
    ) || voices.find(v => v.lang && v.lang.startsWith('en'));
    
    if (englishVoice) {
      ttsUtterance.voice = englishVoice;
      console.log('‚úÖ Using English voice:', englishVoice.name);
    }
  }
  
  console.log('üé§ Final TTS settings:');
  console.log('   Voice:', ttsUtterance.voice?.name || 'System Default (Multilingual)');
  console.log('   Language:', ttsUtterance.lang);
  console.log('   Text length:', answerText.length, 'characters');
  
  // ========================================================================
  // KEY: If no specific voice set, browser uses system default
  // System default is multilingual - can read Hindi without voice pack!
  // ========================================================================
  
  // Event handlers
  ttsUtterance.onstart = () => {
    isSpeaking = true;
    ttsBtn.classList.add('speaking');
    ttsLabel.textContent = 'Stop';
  };
  
  ttsUtterance.onend = () => {
    if (!manualStop) {
      isSpeaking = false;
      ttsBtn.classList.remove('speaking');
      ttsLabel.textContent = 'Listen';
    }
  };
  
  ttsUtterance.onerror = (e) => {
    if (manualStop) {
      manualStop = false;
      return;
    }
    
    isSpeaking = false;
    ttsBtn.classList.remove('speaking');
    ttsLabel.textContent = 'Listen';
    
    let errorMsg = 'Speech failed. ';
    if (e.error === 'canceled' || e.error === 'interrupted') {
      return;
    } else if (e.error === 'not-allowed') {
      errorMsg += 'Please enable speech in browser settings.';
    } else if (e.error === 'language-unavailable') {
      errorMsg += 'Voice not available on your device.';
    } else {
      errorMsg += 'Please try again.';
    }
    alert(errorMsg);
  };
  
  try {
    speechSynthesis.speak(ttsUtterance);
  } catch (error) {
    alert('Text-to-speech is not available on your device.');
  }
});
    
// Conversation history to maintain context - make it global
window.conversationHistory = [];

document.getElementById('submitBtn').addEventListener('click', async () => {
  const question = userInput.value.trim();
  
  if (!selectedQueryType) {
    alert('Please select either "Learn About Statistics" or "Find Haryana Data" first!');
    return;
  }
  
  if (!question) {
    alert('Please enter your question!');
    return;
  }

  const mainContainer = document.querySelector('.container-main');
  if (mainContainer) mainContainer.style.visibility = 'hidden';

  speechSynthesis.cancel();
  isSpeaking = false;
  document.getElementById('ttsToggle').classList.remove('speaking');
  document.getElementById('ttsLabel').textContent = 'Listen';

  document.getElementById('modalQuestion').textContent = question;
  document.getElementById('modalAnswer').innerHTML = 'Thinking...';
  document.getElementById('aiModal').classList.remove('hidden');
  
  // Hide related questions section initially
  const relatedSection = document.getElementById('relatedQuestionsSection');
  if (relatedSection) {
    relatedSection.style.display = 'none';
  }
  
  // Hide autocomplete dropdown
  autocompleteDropdown.style.display = 'none';

  const deviceType = /Mobile|Android|iPhone|iPad|iPod/i.test(navigator.userAgent) ? 'Mobile' : 
                     /Tablet|iPad/i.test(navigator.userAgent) ? 'Tablet' : 'Desktop';
  const browserMatch = navigator.userAgent.match(/(Firefox|Chrome|Safari|Edge|Opera|OPR)/i);
  const browser = browserMatch ? browserMatch[0].replace('OPR', 'Opera') : 'Unknown';

  try {
    const webhookUrl = 'https://n8n-workflow-test.duckdns.org/webhook/stat-abstract';

    // Prepare payload - only include conversationHistory if it has content
    const payload = {
      question: question,
      language: selectedLanguage,
      queryType: selectedQueryType === 'statistics' ? 'STATISTICAL_CONCEPT_QUERY' : 'STATISTICAL_DATA_QUERY',
      mobNo: 'anonymous',
      deviceType: deviceType,
      browser: browser,
      timestamp: new Date().toLocaleString('en-IN', { timeZone: 'Asia/Kolkata' }),
      userAgent: navigator.userAgent
    };
    
    // Only add conversationHistory if it has items
    if (window.conversationHistory.length > 0) {
      payload.conversationHistory = window.conversationHistory;
    }

    const response = await fetch(webhookUrl, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(payload)
    });

    // Check if response is ok
    if (!response.ok) {
      throw new Error(`HTTP error! status: ${response.status}`);
    }

    // Get response text first
    const responseText = await response.text();
    console.log('Raw webhook response:', responseText);
    
    // Try to parse JSON
    let data;
    try {
      data = JSON.parse(responseText);
      console.log('Parsed webhook response:', data);
    } catch (jsonError) {
      console.error('JSON Parse Error:', jsonError);
      console.error('Response text was:', responseText);
      throw new Error('Invalid response format from server');
    }
    
    const aiResponse = data.answer || data.error || 'No response received.';
    const disclaimer = "<br><br>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br>‚ö†Ô∏è <em>Disclaimer: This is an AI-generated response for guidance purposes only. Please verify important information from official sources.</em>";
    
    // Convert newlines to <br> tags for proper display
    const formattedAnswer = aiResponse.replace(/\n/g, '<br>');
    const fullResponse = formattedAnswer + disclaimer;
    
    // Use innerHTML to render HTML links and formatting
    document.getElementById('modalAnswer').innerHTML = fullResponse;
    
    // Add this Q&A to conversation history (store without disclaimer for cleaner context)
    window.conversationHistory.push({
      question: question,
      answer: aiResponse
    });
    
    // Keep only last 5 Q&A pairs to avoid sending too much data
    if (window.conversationHistory.length > 5) {
      window.conversationHistory.shift(); // Remove oldest
    }
    
    console.log('Updated conversation history:', window.conversationHistory);
    
    // Update history badge
    updateHistoryBadge();
    
    // Extract and parse related questions
    let relatedQuestions = null;
    
    if (data.relatedQuestions) {
      // If it's already an array, use it
      if (Array.isArray(data.relatedQuestions)) {
        relatedQuestions = data.relatedQuestions;
      }
      // If it's a string, try to parse it
      else if (typeof data.relatedQuestions === 'string') {
        try {
          // Remove the leading "=" if present (n8n expression)
          let questionsString = data.relatedQuestions.replace(/^=/, '');
          
          // Try to parse as JSON array first (for stringified arrays)
          try {
            relatedQuestions = JSON.parse(questionsString);
            if (!Array.isArray(relatedQuestions)) {
              // If parsed but not an array, split by comma
              relatedQuestions = questionsString.split(',').map(q => q.trim()).filter(q => q.length > 0);
            }
          } catch {
            // If JSON parse fails, split by comma
            relatedQuestions = questionsString.split(',').map(q => q.trim()).filter(q => q.length > 0);
          }
        } catch (parseError) {
          console.error('Error parsing relatedQuestions:', parseError);
          relatedQuestions = null;
        }
      }
    }
    
    console.log('Parsed relatedQuestions:', relatedQuestions);
    console.log('Is Array now?', Array.isArray(relatedQuestions));
    console.log('Length:', relatedQuestions ? relatedQuestions.length : 0);
    
    // Display if we have valid questions
    if (relatedQuestions && Array.isArray(relatedQuestions) && relatedQuestions.length > 0) {
      console.log('Displaying related questions');
      displayRelatedQuestions(relatedQuestions);
    } else {
      console.log('No valid related questions found');
      if (relatedSection) {
        relatedSection.style.display = 'none';
      }
    }
    
  } catch (error) {
    console.error('Error:', error);
    let errorMessage = 'Connection failed: ';
    if (error.message.includes('Invalid response format')) {
      errorMessage += 'The server sent an invalid response. Please check the webhook configuration.';
    } else if (error.message.includes('HTTP error')) {
      errorMessage += error.message + '. The server may be down or the webhook URL is incorrect.';
    } else {
      errorMessage += error.message;
    }
    document.getElementById('modalAnswer').innerHTML = errorMessage.replace(/\n/g, '<br>');
    if (relatedSection) {
      relatedSection.style.display = 'none';
    }
  }
});  
  // ‚úÖ NEW FUNCTION: Display Related Questions
function displayRelatedQuestions(questions) {
  const section = document.getElementById('relatedQuestionsSection');
  const listContainer = document.getElementById('relatedQuestionsList');
  
  if (!questions || questions.length === 0) {
    section.style.display = 'none';
    return;
  }
  
  // Clear previous questions
  listContainer.innerHTML = '';
  
  // Add each related question as a clickable button
  questions.forEach((q, index) => {
    const questionBtn = document.createElement('button');
    questionBtn.className = 'w-full text-left p-3 bg-white hover:bg-purple-50 border-2 border-purple-200 hover:border-purple-400 rounded-xl transition-all duration-200 text-sm font-medium text-gray-700 hover:text-purple-700 flex items-start gap-2';
    questionBtn.innerHTML = `
      <span class="flex-shrink-0 w-6 h-6 bg-purple-100 text-purple-600 rounded-full flex items-center justify-center text-xs font-bold mt-0.5">
        ${index + 1}
      </span>
      <span class="flex-1">${q}</span>
      <svg class="w-4 h-4 flex-shrink-0 mt-1 text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
      </svg>
    `;
    
    // Click handler to ask the related question
    questionBtn.addEventListener('click', () => {
      // Close current modal
      document.getElementById('aiModal').classList.add('hidden');
      const mainContainer = document.querySelector('.container-main');
      if (mainContainer) mainContainer.style.visibility = 'visible';
      
      // Set the question in input field
      userInput.value = q;
      
      // Auto-submit after a brief delay
      setTimeout(() => {
        document.getElementById('submitBtn').click();
      }, 300);
    });
    
    listContainer.appendChild(questionBtn);
  });
  
  section.style.display = 'block';
}
  

let recognition;
let isRecording = false;

if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
  const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
  recognition = new SpeechRecognition();
  recognition.continuous = false;
  recognition.interimResults = false;
  recognition.lang = 'hi-IN';

  recognition.onstart = () => {
    isRecording = true;
    const voiceBtn = document.getElementById('voiceBtn');
    voiceBtn.classList.add('recording');
    voiceBtn.title = 'Recording... Click to stop';
  };

  recognition.onresult = (event) => {
    const transcript = event.results[0][0].transcript;
    userInput.value = transcript;
    // Trigger autocomplete
    userInput.dispatchEvent(new Event('input'));
  };

  recognition.onend = () => {
    isRecording = false;
    const voiceBtn = document.getElementById('voiceBtn');
    voiceBtn.classList.remove('recording');
    voiceBtn.title = 'Click to speak';
  };

  recognition.onerror = (event) => {
    isRecording = false;
    const voiceBtn = document.getElementById('voiceBtn');
    voiceBtn.classList.remove('recording');
    voiceBtn.title = 'Click to speak';
    if (event.error !== 'no-speech') {
      alert('Voice recognition failed. Please try again.');
    }
  };
}

document.getElementById('voiceBtn').addEventListener('click', (e) => {
  e.preventDefault();
  if (recognition) {
    if (isRecording) {
      recognition.stop();
    } else {
      recognition.start();
    }
  } else {
    alert('Voice recognition is not supported in your browser.');
  }
});

  // End of TTS listener
}

// Initialize music toggle (must run after DOM ready)
function initMusicToggle() {
  const fluteMusic = document.getElementById('fluteMusic');
  const musicToggle = document.getElementById('musicToggle');
  const musicLabel = document.getElementById('musicLabel');

  // ‚úÖ CHECK IF ELEMENTS EXIST BEFORE ACCESSING
  if (!fluteMusic || !musicToggle || !musicLabel) {
    console.log('‚ÑπÔ∏è Music player elements not found (feature removed from UI)');
    return; // Exit safely without crashing
  }

  musicToggle.addEventListener('click', () => {
    if (fluteMusic.paused) {
      fluteMusic.play().catch(e => {
        alert("Please interact with the page first, then click to play music.");
      });
      musicLabel.textContent = "Pause Flute";
    } else {
      fluteMusic.pause();
      musicLabel.textContent = "Play Flute";
    }
  });
}

document.getElementById('closeBtn').onclick = () => {
  speechSynthesis.cancel();
  document.getElementById('aiModal').classList.add('hidden');
  const mainContainer = document.querySelector('.container-main');
  if (mainContainer) mainContainer.style.visibility = 'visible';
};

// New Topic button - clears conversation history
document.getElementById('newTopicBtn').onclick = () => {
  window.conversationHistory = [];
  updateHistoryBadge();
  alert('‚ú® Conversation history cleared! You can now start a new topic.');
  console.log('Conversation history cleared');
};

// Function to update history badge
function updateHistoryBadge() {
  const badge = document.getElementById('historyBadge');
  const count = document.getElementById('historyCount');
  
  if (window.conversationHistory && window.conversationHistory.length > 0) {
    badge.classList.remove('hidden');
    count.textContent = window.conversationHistory.length;
  } else {
    badge.classList.add('hidden');
  }
}

document.getElementById('closeModal').onclick = () => {
  speechSynthesis.cancel();
  document.getElementById('aiModal').classList.add('hidden');
  const mainContainer = document.querySelector('.container-main');
  if (mainContainer) mainContainer.style.visibility = 'visible';
};

document.getElementById('whatsappBtn').onclick = () => {
  const question = document.getElementById('modalQuestion').textContent;
  const answer = document.getElementById('modalAnswer').textContent;
  
  // Format message for WhatsApp
  const message = `*Haryana DataVista - Statistical Assistant*\n\n*Question:*\n${question}\n\n*Answer:*\n${answer}\n\n_Generated by Haryana DataVista Chatbot_\nüîó https://esaharyana.gov.in`;
  
  // Open WhatsApp with pre-filled message
  const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(message)}`;
  window.open(whatsappUrl, '_blank');
};


function openFeedback() {
  const feedbackModal = document.getElementById('feedbackModal');
  const feedbackIframe = document.getElementById('feedbackIframe');
  const iframeLoader = document.getElementById('iframeLoader');
  
  feedbackModal.classList.add('show');
  iframeLoader.style.display = 'block';
  
  feedbackIframe.src = 'https://vksinglakkr.github.io/StatisticalAbstract/feedback_StatAbs.html';
  
  feedbackIframe.onload = function() {
    iframeLoader.style.display = 'none';
  };feedbackIframe.onerror = function() {
    iframeLoader.innerHTML = '<p style="color: #ef4444; font-weight: 600;">Failed to load feedback form</p>';
  };
}

function closeFeedback() {
  const feedbackModal = document.getElementById('feedbackModal');
  const feedbackIframe = document.getElementById('feedbackIframe');
  const iframeLoader = document.getElementById('iframeLoader');
  
  feedbackModal.classList.remove('show');
  feedbackIframe.src = '';
  
  iframeLoader.style.display = 'none';
  iframeLoader.innerHTML = '<div class="spinner"></div><p style="color: #64748b; font-weight: 600;">Loading feedback form...</p>';
}

document.getElementById('feedbackModal').addEventListener('click', function(e) {
  if (e.target === this) {
    closeFeedback();
  }
});

function openLiveTelecast() {
  window.open('https://www.youtube.com/live/My5T4LiHBdw', '_blank', 'noopener,noreferrer');
}    
function openTutorialVideos() {
/*
  const quizModal = document.getElementById('quizModal');
  const quizIframe = document.getElementById('quizIframe');
  const quizIframeLoader = document.getElementById('quizIframeLoader');
  
  quizModal.classList.add('show');
  quizIframeLoader.style.display = 'block';
  
  quizIframe.src = 'https://igmquiz.in/webloginkkr.aspx';
  
  quizIframe.onload = function() {
    quizIframeLoader.style.display = 'none';
  };
  
  quizIframe.onerror = function() {
    quizIframeLoader.innerHTML = '<p style="color: #ef4444; font-weight: 600;">Failed to load Tutorial Videos</p>';
  };
*/
window.open('https://igmquiz.in/webloginkkr.aspx', '_blank');
}

function closeQuizChatbot() {
  const quizModal = document.getElementById('quizModal');
  const quizIframe = document.getElementById('quizIframe');
  const quizIframeLoader = document.getElementById('quizIframeLoader');
  
  quizModal.classList.remove('show');
  quizIframe.src = '';
  
  quizIframeLoader.style.display = 'none';
  quizIframeLoader.innerHTML = '<div class="spinner"></div><p style="color: #64748b; font-weight: 600;">Loading Videos...</p>';
}

document.getElementById('quizModal').addEventListener('click', function(e) {
  if (e.target === this) {
    closeQuizChatbot();
  }
});
  

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// FILE SEARCH SYSTEM
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

async function loadMasterFileData() {
  try {
    console.log('üîÑ Loading questions from Google Sheets (TSV)...');
    console.log('   URL:', GOOGLE_SHEET_URL);
    
    const response = await fetch(GOOGLE_SHEET_URL);
    console.log('   üì° Response status:', response.status, response.statusText);
    
    if (!response.ok) {
      throw new Error(`HTTP ${response.status}: ${response.statusText}`);
    }
    
    const tsvText = await response.text();
    console.log('   üìÑ TSV text length:', tsvText.length, 'characters');
    
    const lines = tsvText.split('\n');
    console.log('   üìÑ Total lines:', lines.length);
    
    masterFileData = []; // Clear existing data
    
    // Parse TSV - Skip header row (index 0)
    for (let i = 1; i < lines.length; i++) {
      const line = lines[i].trim();
      if (!line) continue;
      
      // Split by TAB (TSV format) - supports commas in questions
      const columns = line.split('\t');
      
      // Your sheet format: Chp_Code [TAB] Chapter_Name [TAB] sec_code [TAB] part_code
      // Column 0 = Chp_Code (1, 2, 3...)
      // Column 1 = Chapter_Name (the actual question)
      // Column 2 = sec_code (Admin_Stru, etc.)
      // Column 3 = part_code (SS, ES, etc.)
      if (columns.length >= 3) {
        const chp_code = columns[0].trim();   // Column 0 = Chp_Code
        const question = columns[1].trim();   // Column 1 = Chapter_Name (ACTUAL QUESTION)
        const sec_code = columns[2].trim();   // Column 2 = sec_code
        
        if (question && sec_code && chp_code) {
          masterFileData.push({
            chp_code: chp_code.padStart(2, '0'),
            chapter_name: question,
            sec_code: sec_code,
            part_code: '',
            search_text: question.toLowerCase()
          });
        }
      }
    }
    
    console.log(`‚úÖ Loaded ${masterFileData.length} questions from Google Sheets`);
    console.log('   Sample data:', masterFileData.slice(0, 3));
    
  } catch (error) {
    console.error('‚ùå Error loading Google Sheets data:', error);
    console.error('   Error details:', error.message);
    
    // Fallback to empty array
    masterFileData = [];
    
    alert('‚ö†Ô∏è Could not load questions from Google Sheets. Please check:\n' +
          '1. Sheet is published to web (TSV format)\n' +
          '2. Sheet is publicly accessible\n' +
          '3. URL is correct');
  }
}

// File Search Input Handler - Initialize after DOM loads
let fileSearchTimeout;

function initFileSearchListener() {
  if (!userInput) initDOMElements();
  
  // We use the SAME userInput for both modes
  // The autocomplete behavior changes based on selectedQueryType
  console.log('‚úÖ File search uses userInput field');
}

function performFileSearch(query) {
  const dropdown = document.getElementById('autocompleteDropdown'); // Use same dropdown
  
  if (!query || query.length < 2) {
    dropdown.style.display = 'none';
    return;
  }
  
  const searchTerm = query.toLowerCase();
  const results = masterFileData.filter(item => 
    item.search_text.includes(searchTerm)
  ).slice(0, 15);
  
  if (results.length > 0) {
    displayFileAutocomplete(results, dropdown);
  } else {
    dropdown.innerHTML = '<div class="autocomplete-no-results">No matching questions found in Google Sheets</div>';
    dropdown.style.display = 'block';
  }
}

// ============================================================================
// FUNCTION 2: displayFileAutocomplete (Replace around line 2170)
// ============================================================================
function displayFileAutocomplete(results, dropdown) {
  let html = '';
  
  results.forEach(item => {
    // ‚úÖ FIX 3: Show only question text in autocomplete (no chapter/sector codes)
    html += `
      <div class="autocomplete-item" data-question="${item.chapter_name}" data-item='${JSON.stringify(item)}'>
        <div style="font-weight: 600;">${item.chapter_name}</div>
      </div>
    `;
  });
  
  dropdown.innerHTML = html;
  dropdown.style.display = 'block';
  
  // Add click handlers
  document.querySelectorAll('.autocomplete-item').forEach(element => {
    element.addEventListener('click', function() {
      const itemData = JSON.parse(this.getAttribute('data-item'));
      selectFileItem(itemData);
      userInput.value = itemData.chapter_name;
      dropdown.style.display = 'none';
    });
  });
}


function selectFileItem(item) {
  selectedFileItem = item;
  
  // Use userInput (the main input field) instead of non-existent fileSearchInput
  if (userInput) {
    userInput.value = item.chapter_name;
  }
  
  const dropdown = document.getElementById('autocompleteDropdown');
  if (dropdown) {
    dropdown.style.display = 'none';
  }
  
  const displayElement = document.getElementById('fileSelectedDisplay');
  if (displayElement) {
    displayElement.innerHTML = `
      <strong>üìã Selected:</strong> ${item.chapter_name}<br>
      <small>Section: ${item.sec_code} | Chapter: ${item.chp_code}</small>
    `;
    displayElement.style.display = 'block';
  }
  
  console.log('‚úÖ Selected file item:', item);
}

async function searchStatFiles() {
  if (!selectedFileItem) {
    alert('‚ö†Ô∏è Please select a question from the dropdown first!');
    return;
  }
  
  const resultsDiv = document.getElementById('fileResultsArea');
  resultsDiv.innerHTML = '<div class="text-center py-8 text-gray-600">üîç Searching for files...</div>';
  
  const filePrefix = selectedFileItem.sec_code + selectedFileItem.chp_code;
  console.log('üîç Searching for files with prefix:', filePrefix);
  
  try {
    const response = await fetch(FILE_API_ENDPOINT, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        type: 'file_search',  // ‚ö†Ô∏è REQUIRED FOR N8N ROUTING
        filePrefix: filePrefix,
        question: selectedFileItem.chapter_name,
        sec_code: selectedFileItem.sec_code,
        chp_code: selectedFileItem.chp_code
      })
    });
    
    const data = await response.json();
    
    if (data.success && data.files && data.files.length > 0) {
      displayFileResults(data.files, selectedFileItem);
    } else {
      displayNoFileResults(selectedFileItem, filePrefix);
    }
    
  } catch (error) {
    console.error('‚ùå Error:', error);
    resultsDiv.innerHTML = '<div class="text-center py-8 text-red-600">‚ùå Error searching files. Please try again.</div>';
  }
}

function displayFileResults(files, selectedItem) {
  const resultsDiv = document.getElementById('fileResultsArea');
  
  const filesByYear = {};
  files.forEach(file => {
    if (!filesByYear[file.year]) {
      filesByYear[file.year] = [];
    }
    filesByYear[file.year].push(file);
  });
  
  const years = Object.keys(filesByYear).sort().reverse();
  
  let html = `
    <div class="bg-gradient-to-br from-green-50 to-emerald-50 p-5 rounded-xl mb-5 border-2 border-green-200">
      <h3 class="text-lg font-bold text-gray-800 mb-2">‚úÖ Found ${files.length} file(s)</h3>
      <p class="text-gray-700 font-semibold text-sm">${selectedItem.chapter_name}</p>
      <p class="text-xs text-gray-600 mt-1">Section: ${selectedItem.sec_code} | Chapter: ${selectedItem.chp_code}</p>
    </div>
  `;
  
  years.forEach(year => {
    html += `
      <div class="file-year-group">
        <h4>üìÖ Year: ${year}</h4>
    `;
    
    filesByYear[year].forEach(file => {
      const icon = file.extension === 'pdf' ? 'üìï' : 'üìä';
      html += `
        <a href="${file.url}" target="_blank" class="file-download-link">
          ${icon} ${file.filename}
        </a>
      `;
    });
    
    html += `</div>`;
  });
  
  resultsDiv.innerHTML = html;
}

function displayNoFileResults(selectedItem, filePrefix) {
  const resultsDiv = document.getElementById('fileResultsArea');
  resultsDiv.innerHTML = `
    <div class="text-center py-12 bg-yellow-50 rounded-xl border-2 border-yellow-200">
      <div class="text-6xl mb-4">üì≠</div>
      <h4 class="text-lg font-bold text-gray-800 mb-2">No files found</h4>
      <p class="text-gray-600 text-sm">No data files found for: <strong>${selectedItem.chapter_name}</strong></p>
      <p class="text-xs text-gray-500 mt-2">File prefix: ${filePrefix}</p>
    </div>
  `;
}

// Close file autocomplete when clicking outside
document.addEventListener('click', function(e) {
  const fileInput = document.getElementById('fileSearchInput');
  const fileDropdown = document.getElementById('autocompleteDropdown');
  
  if (fileInput && fileDropdown) {
    if (!fileInput.contains(e.target) && !fileDropdown.contains(e.target)) {
      fileDropdown.style.display = 'none';
    }
  }
});
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// Last Updated Timestamp - DYNAMIC DATE (from IGM)
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
window.addEventListener('DOMContentLoaded', function() {
  console.log('üöÄ Page loaded - initializing components...');
  
  // Initialize DOM elements
  initDOMElements();
  console.log('‚úÖ DOM elements initialized');
  
  // DON'T auto-select any radio button - let user choose
  // questionSection stays hidden until user selects a radio button
  
  // Initialize autocomplete listeners
  initUserInputListener();
  console.log('‚úÖ User input listener initialized');
  
  initFileSearchListener();
  console.log('‚úÖ File search listener initialized');
  
  // Initialize dropdown listeners (category/question select)
  initDropdownListeners();
  console.log('‚úÖ Dropdown listeners initialized');
  
  // Initialize language buttons and TTS
  initLanguageAndTTS();
  console.log('‚úÖ Language and TTS initialized');
  
  // Initialize music toggle (SAFELY - checks if elements exist)
  initMusicToggle();
  console.log('‚úÖ Music toggle check completed');
  
  // Set last modified date - IMPROVED VERSION
  const elem = document.getElementById('lastModified');
  console.log('üìÖ Setting last modified date...');
  console.log('   Element found:', elem ? 'YES' : 'NO');
  
  if (elem) {
    try {
      // Get the last modified string
      const lastModifiedStr = document.lastModified;
      console.log('   Raw lastModified string:', lastModifiedStr);
      
      // Parse the date
      const lastModifiedDate = new Date(lastModifiedStr);
      console.log('   Parsed date object:', lastModifiedDate);
      console.log('   Is valid date?', !isNaN(lastModifiedDate.getTime()));
      
      // Check if valid date
      if (isNaN(lastModifiedDate.getTime())) {
        // Fallback to current date
        console.warn('‚ö†Ô∏è Could not parse lastModified, using current date');
        const now = new Date();
        elem.textContent = now.toLocaleDateString('en-US', {
          year: 'numeric', month: 'long', day: 'numeric'
        }) + ' at ' + now.toLocaleTimeString('en-US', {
          hour: '2-digit', minute: '2-digit', hour12: true
        });
      } else {
        // Valid date - format it
        elem.textContent = lastModifiedDate.toLocaleDateString('en-US', {
          year: 'numeric', month: 'long', day: 'numeric'
        }) + ' at ' + lastModifiedDate.toLocaleTimeString('en-US', {
          hour: '2-digit', minute: '2-digit', hour12: true
        });
      }
      
      elem.style.display = 'inline';
      console.log('‚úÖ Last Modified set to:', elem.textContent);
      
    } catch (error) {
      console.error('‚ùå Error setting last modified:', error);
      // Final fallback
      elem.textContent = 'Recently Updated';
      elem.style.display = 'inline';
    }
  } else {
    console.error('‚ùå Element with id="lastModified" not found in HTML!');
  }
  
  console.log('üéâ All initialization complete!');
});</script>

</body>
</html>
